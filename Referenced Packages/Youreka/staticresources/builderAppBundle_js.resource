!function e(t,n,i){function a(s,o){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(r)return r(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return a(n?n:e)},c,c.exports,e,t,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)a(i[s]);return a}({1:[function(e,t,n){"use strict";var i=jQuery,a=e("./src/app"),r=e("./src/question"),s=e("./src/util"),o=e("./src/section"),l=e("./src/dnd");i(document).ready(function(){i(".smallModal").draggable(),i("#saveUpdates").click(a.quickSaveBtn),i("#saveUpdatesAssignDiscoveries").click(a.saveAndNextPageBtn),i(".cancelUpdate").click(a.cancelUpdateBtn),i(".saveAndPreview").click(a.saveAndPreviewBtn),i("#allSectionsContainer").on("click",".editSection",function(){o.editSection(i(this))}),i("#allSectionsContainer").on("click",".removeSection",function(){o.removeSection(i(this))}),i("#allSectionsContainer").on("click",".editQuestion",function(){r.editQuestion(i(this))}),i("#allSectionsContainer").on("click",".removeQuestion",function(){r.removeQuestion(i(this))}),i(".sectionModalClose").click(function(){o.cancelSection(i(this))}),i(".sectionModalSave").click(function(){o.updateSection(i(this))}),i(".questionModalClose").click(r.cancelQuestion),i(".questionModalSave").click(r.updateQuestion),i("#editQuestion").on("click",".checkFormulaSyntax",r.checkFilterLogicSyntax),i("#editQuestion").on("click",".addFormulaRow",r.addRowToViewableSection),i("#editQuestion").on("click",".removeFormulaRow",r.removeConditionalRow),i("#conditionalTableContainer").on("change",".sectionPicklist",function(){r.handleDepSectionChange(i(this))}),i("#editViewable0").change(r.handleViewableChange),i(".modalForm").on("change",".fieldLinkObject",r.updateFieldLinkFieldPicklist),i(".modalForm").on("change","#editFieldPicklist",function(){r.handleFieldLinkFieldPicklistChange(i(this))}),i(".freeTextLabel").each(function(e,t){i(this).html(s.truncateLongTextIntoElipsesSpan(s.removeNPChars(s.cleanHTMLChars(i(this).text()))))}),i("#editFieldType").change(r.handleTypePicklistChange),i(".addAnotherValue").click(function(e){r.handlePicklistOptionAdd(),e.preventDefault()}),l.initDnD(),i("#displayFormula").keypress(s.filterInvalidFilterKeysOnPress),s.reloadFieldLinkFieldsUsed()}),i.fn.replaceWithPush=function(e){var t=i(e);return this.replaceWith(t),t}},{"./src/app":3,"./src/dnd":4,"./src/question":5,"./src/section":6,"./src/util":7}],2:[function(e,t,n){"use strict";function i(e){f=[],v=[],s(),o(),Visualforce.remoting.Manager.invokeAction(CTL_VARS.vfr.saveFormVFR,f,v,function(t,n){"exception"==n.type?(alert("Something went wrong saving the form.\n"+JSON.stringify(n)),console.log(JSON.stringify(n)),m.hideModal()):(m.hideModal(),r(t),e&&e())})}function a(){l()&&($("#fade").fadeIn(),$("#savingStatus").fadeIn(),i())}function r(e){var t,n,i,a,r,s,o,l,d,c,u;for(t in e.id2SavedFormSection)8==t.length&&e.id2SavedFormSection.hasOwnProperty(t)&&(i=formData.allSectionWrappers[t],n=e.id2SavedFormSection[t].Id,i.section.Id=n,Object.defineProperty(formData.allSectionWrappers,n,Object.getOwnPropertyDescriptor(formData.allSectionWrappers,t)),delete formData.allSectionWrappers[t],$('.sectionBox[data-randomid="'+t+'"').attr("data-sfid",n),$('.sectionBox[data-randomid="'+t+'"').data("sfid",n));for(d=0;d<e.deletedFormSections.length;d++)n=e.deletedFormSections[d].Id,delete formData.allSectionWrappers[n],$('.sectionBox[data-sfid="'+n+'"]').remove();for(a in e.id2SavedQuestion)if(e.id2SavedQuestion.hasOwnProperty(a))for(s=formData.allQuestionWrappers[a],o=s.question,r=e.id2SavedQuestion[a].Id,o.Id=r,8===a.length&&($('.questionBoxUsed[data-randomid="'+a+'"').attr("data-sfid",r),$('.questionBoxUsed[data-randomid="'+a+'"').data("sfid",r),Object.defineProperty(formData.allQuestionWrappers,r,Object.getOwnPropertyDescriptor(formData.allQuestionWrappers,a)),delete formData.allQuestionWrappers[a]),l=0;l<e.questionId2SavedQuestionValueList[a].length;l++)s.questionValues[l].questionValue.Id=e.questionId2SavedQuestionValueList[a][l].Id;for(d=0;d<e.deletedQuestions.length;d++)r=e.deletedQuestions[d].Id,delete formData.allQuestionWrappers[r],$('.questionBoxUsed[data-sfid="'+r+'"]').remove();for(a in e.questionID2DeletedQuestionValues)for(s=formData.allQuestionWrappers[a],u=s.questionValues.length;u--;)for(c=0;c<e.questionID2DeletedQuestionValues[a].length;c++)s.questionValues.length>0&&s.questionValues[u].questionValue.Id==e.questionID2DeletedQuestionValues[a][c].Id&&(s.questionValues.splice(u,1),e.questionID2DeletedQuestionValues[a].splice(c,1))}function s(){var e,t,n,i,a=0;$(".sectionBox").each(function(r,s){t=$(s),e=t.data().hasOwnProperty("sfid")?t.data("sfid"):t.data("randomid"),n=formData.allSectionWrappers[e],i=n.section,n.toDelete===!1&&(a++,i[ns+"Order__c"]=a),n.section.hasOwnProperty("attributes")&&delete n.section.attributes,delete n.column1Questions,delete n.column2Questions,f.push(n)})}function o(){var e,t,n,i,a,r,s=0;$(".questionBoxUsed").each(function(o,l){if(n=$(l),t=n.data().hasOwnProperty("sfid")?n.data("sfid"):n.data("randomid"),i=formData.allQuestionWrappers[t],a=i.question,r=n.closest(".sectionBox"),i.toDelete===!1&&(s++,a[ns+"Order__c"]=s),void 0!==r.data("sfid")?a[ns+"Section__c"]=r.data("sfid"):(a[ns+"Section__c"]=null,a[ns+"Section_Random_Id__c"]=r.data("randomid")),2===r.find(".questionColumn").length?n.closest(".questionColumn").hasClass("rightBorder")?a[ns+"Column__c"]=1:a[ns+"Column__c"]=2:a[ns+"Column__c"]=1,delete a.attributes,delete a[ns+"Section__r"],delete a[ns+"Question_Values__r"],i.hasOwnProperty("questionValues"))for(e=0;e<i.questionValues.length;e++)delete i.questionValues[e].questionValue.attributes;v.push(i)})}function l(){var e=!0;return $(".sectionBox:visible").each(function(t,n){var i=!1;return i=$(n).find(".questionBoxUsed:visible").length>0||!1,i===!1?(alert("At least one section doesn't have any questions. Please add a question or remove the section."),e=!1,!1):void 0}),e}function d(){window.top.location="/apex/TB_SimpleDiscoveryRules?templateId="+CTL_VARS.templateID}function c(){i(u)}function u(){var t=e("../../formDisplayApp/index");Visualforce.remoting.Manager.invokeAction(CTL_VARS.vfr.previewItems,CTL_VARS.templateID,function(e,n){if("exception"==n.type)alert(e),console.log("error result:"+e),p("#previewStatus");else{for(var i=e[0].sections,a=0;a<i.length;a++)for(var r=0;r<i[a].allQuestions.length;r++){var s=i[a].allQuestions[r],o=[],l={};l[ns+"Question__c"]=s.question.Id,l.Id="AAAQ"+r+a,l.Name="A-000183",l[ns+"Form__c"]=e[0].formId,l[ns+"Checkbox_Answer__c"]=!1,o.push(l),s.answers=o,s.question.answers=o}sfEnv.previewForm=e,sfEnv.thisForm=e[0].theTemplate,h("#previewStatus"),t.previewOpen()}})}function h(e){$("#fade").show(),$(e).show()}function p(e){$("#fade").hide(),$(e).hide()}var f,v,m=e("./util");t.exports={saveForm:i,quickSaveForm:a,nextPage:d,previewForm:c}},{"../../formDisplayApp/index":8,"./util":7}],3:[function(e,t,n){"use strict";function i(e){l.quickSaveForm(),e.preventDefault()}function a(e){o("#fade").fadeIn(),o("#savingStatus").fadeIn(),l.saveForm(l.nextPage),e.preventDefault()}function r(e){window.top.location="/"+CTL_VARS.templateID}function s(e){l.previewForm()}var o=jQuery,l=e("./Form");t.exports={quickSaveBtn:i,saveAndNextPageBtn:a,cancelUpdateBtn:r,saveAndPreviewBtn:s}},{"./Form":2}],4:[function(e,t,n){"use strict";function i(){$(".draggableNewQuestion").draggable({cursor:"move",helper:"clone",revert:"invalid",appendTo:"body",connectToSortable:".questionList"}),$(".draggableNewSection").draggable({cursor:"move",helper:"clone",revert:"invalid",appendTo:"body",connectToSortable:".sectionList"}),$(".draggableNewSpace").draggable({cursor:"move",helper:"clone",revert:"invalid",appendTo:"body",connectToSortable:".questionList"}),$(".draggableNewText").draggable({cursor:"move",helper:"clone",revert:"invalid",appendTo:"body",connectToSortable:".questionList"}),a.makeSectionListsSortable(),r.makeQuestionListsSortable()}var a=e("./section"),r=e("./question");t.exports={initDnD:i}},{"./question":5,"./section":6}],5:[function(e,t,n){"use strict";function i(e){fe=!0,ge=e.closest(".questionBoxUsed");var t=ge.data().hasOwnProperty("sfid")?ge.data("sfid"):ge.data("randomid");ve=formData.allQuestionWrappers[t],me=ve.question,$("#editIndentation").val(me[ns+"Indentation__c"]),$("#editQuestionName").val(me[ns+"Label__c"]),$("#editRequired").prop("checked",me[ns+"Required__c"]),$("#editColor").val(me[ns+"Color__c"]),$("#editWeight").prop("checked",me[ns+"Bold__c"]);var n=me[ns+"Type__c"];if($("#editFieldType").val(me[ns+"Type__c"]),"Currency"===n||"Percent"===n||"Number"===n?($("#numberFieldLength").show(),""!==me[ns+"Field_Length__c"]&&($("#editIntegerLength").val(me[ns+"Field_Length__c"]),$("#editDecimalLength").val(me[ns+"Decimal_Length__c"]))):$("#numberFieldLength").hide(),me.hasOwnProperty(ns+"Dependent_Question_Values__c")&&null!==me[ns+"Dependent_Question_Values__c"]){$("#editViewable0").val("Conditional");var i=JSON.parse(me[ns+"Dependent_Question_Values__c"]);$("#conditionalTableContainer").show(),void 0!=i[0]&&i[0].hasOwnProperty("parentID")&&(i=P(i)),H(i.logic)}if("Free Text"===me[ns+"Type__c"]?(m("Free Text","Edit"),$("#editTxtLabel").val(me[ns+"Label__c"])):m("Question","Edit"),"Text"===me[ns+"Type__c"]||"Long Text"===me[ns+"Type__c"]?(K($("#editFieldType")),$("#editFieldLength").val(me[ns+"Field_Length__c"])):Y(),"Field Link"===me[ns+"Type__c"]&&(ne($("#editFieldType")),$("#editObjectPicklist").val(me[ns+"Link_Lookup__c"]),X(me[ns+"Link_Object__c"]),$("#editFieldPicklist option").sort(pe.NASort).appendTo("#editFieldPicklist"),$("#editFieldPicklist").val(me[ns+"Link_Field__c"]),ae($("#editFieldPicklist").val(),!0)),!("Picklist"!==me[ns+"Type__c"]&&"Multi-select Picklist"!==me[ns+"Type__c"]&&"Radio Button List"!=me[ns+"Type__c"]&&"Checkbox List"!==me[ns+"Type__c"]&&"Yes/No"!==me[ns+"Type__c"]&&"Field Link"!==me[ns+"Type__c"]||("Field Link"!==me[ns+"Type__c"]||"PICKLIST"!==object2FieldList[me[ns+"Link_Object__c"]][me[ns+"Link_Field__c"]].linkFieldType&&"MULTIPICKLIST"!==object2FieldList[me[ns+"Link_Object__c"]][me[ns+"Link_Field__c"]].linkFieldType&&"BOOLEAN"!==object2FieldList[me[ns+"Link_Object__c"]][me[ns+"Link_Field__c"]].linkFieldType)&&"Field Link"===me[ns+"Type__c"])){var a=ve.questionValues;if(null!==a){"Field Link"!==me[ns+"Type__c"]&&$(".picklistValueContainer").fadeIn(),se($("#editFieldType")),$("#editCreateDiscovery").prop("checked",me[ns+"Make_Discovery__c"]),$("#editQuestion .editPicklistValue").remove(),$("#editQuestion .editPicklistValueLabel").remove();var r=0;$.each(a,function(){if(this.questionValue.toDelete!==!0){r++,$("#editQuestion .addAnotherValue").before($('<label class="editPicklistValueLabel">Option '+r+'</label><input type="text" class="editPicklistValue" maxlength="80" data-sfid="'+this.questionValue.Id+'" value="'+this.questionValue[ns+"Label__c"]+'"/>'))}}),"Field Link"!==me[ns+"Type__c"]&&$(".picklistValueContainer").slideDown()}}}function a(e){ge=e.closest(".questionBoxUsed");var t=ge.data().hasOwnProperty("sfid")?ge.data("sfid"):ge.data("randomid");ve=formData.allQuestionWrappers[t],me=ve.question,"Space"===me[ns+"Type__c"]?l(t):confirm("Are you sure you wish to remove this "+me[ns+"Type__c"]+" question?")&&l(t)}function r(){$("#insertedNewQuestion").remove(),f(),pe.hideModal()}function s(){if(fe===!1){if(z()&&J()&&U($("#editFieldType").val())){var e,t=me[ns+"RandomId__c"],n=!$(".editQuestionOrText").is(":visible");e=n?'<li class="questionBoxUsed freeText" data-randomid="'+t+'">':'<li class="questionBoxUsed" data-randomid="'+t+'">',e+=n?'<div class="freeTextLabel"></div>':'<div class="questionLabel"></div>',e+='<a class="editLink editQuestion">Edit</a>',e+='<div class="closeButton removeQuestion"><i class="fa fa-times"></i></div></li>',ge=$("#insertedNewQuestion").replaceWithPush(e),o("new",t)}}else z()&&J()&&U($("#editFieldType").val())&&o("edit")}function o(e,t){var n=$("#editFieldType").val();"Yes/No"==n&&(n="Picklist");var i;if("edit"===e&&(me[ns+"Dependent_Question_Values__c"]=null,me[ns+"Link_Field__c"]=null,me[ns+"Link_Object__c"]=null,me[ns+"Link_Lookup__c"]=null,me[ns+"Field_Length__c"]=null,me[ns+"Decimal_Length__c"]=null),$(".editQuestionOrText").is(":visible")){i=me[ns+"Type__c"],me[ns+"Type__c"]=n;var a=pe.removeNPChars($("#editQuestionName").val().trim());me[ns+"Label__c"]=a,ge.find(".questionLabel").text(a),me[ns+"Required__c"]=$("#editRequired").prop("checked")}else{me[ns+"Type__c"]="Free Text";var r=pe.replaceHTMLEntities($("#editTxtLabel").val());me[ns+"Label__c"]=r.replace(/[\x00-\x1F\x7F-\x9F]/g,"\n"),ge.find(".freeTextLabel").html(pe.truncateLongTextIntoElipsesSpan(r))}me[ns+"Bold__c"]=$("#editWeight").prop("checked"),me[ns+"Color__c"]=$("#editColor").val(),"Conditional"===$("#editViewable0").val()&&(me[ns+"Dependent_Question_Values__c"]=S());var s=$("#editCreateDiscovery").prop("checked");(null===s||void 0===s)&&(s=!1),me[ns+"Make_Discovery__c"]=s;var o=$("#editIndentation").val();if(me[ns+"Indentation__c"]=o,"--None--"===o&&(me[ns+"Indentation__c"]=null),"Level One"===o?ge.addClass("indentOnce").removeClass("indentTwice indentThrice"):"Level Two"===o?ge.addClass("indentTwice").removeClass("indentOnce indentThrice"):"Level Three"===o?ge.addClass("indentThrice").removeClass("indentOnce indentTwice"):ge.removeClass("indentOnce indentTwice indentThrice"),"Picklist"!=n&&"Multi-select Picklist"!=n&&"Field Link"!=n&&"Radio Button List"!=n&&"Checkbox List"!=n&&"Yes/No"!=n&&(me[ns+"Make_Discovery__c"]=!1),"Field Link"!=n&&"Field Link"===i?(me[ns+"Link_Object__c"]=null,me[ns+"Link_Field__c"]=null,me[ns+"Link_Lookup__c"]=null):"Field Link"===n&&(me[ns+"Link_Object__c"]=$("#editObjectPicklist option:selected").data("objecttype"),me[ns+"Link_Field__c"]=$("#editFieldPicklist").val(),me[ns+"Link_Lookup__c"]=$("#editObjectPicklist").val()),"Percent"==n||"Currency"==n||"Number"==n?(me[ns+"Field_Length__c"]=$("#editIntegerLength").val(),me[ns+"Decimal_Length__c"]=$("#editDecimalLength").val()):"Text"!=n&&"Long Text"!=n?(me[ns+"Field_Length__c"]=null,me[ns+"Decimal_Length__c"]=null):(me[ns+"Field_Length__c"]=$("#editFieldLength").val(),me[ns+"Decimal_Length__c"]=null),le(ge,me[ns+"Make_Discovery__c"]),"Picklist"===n||"Multi-select Picklist"===n||"Radio Button List"===n||"Checkbox List"===n||"Yes/No"===n||"Field Link"===n){var l=[];if("Field Link"==n&&("PICKLIST"==object2FieldList[me[ns+"Link_Object__c"]][me[ns+"Link_Field__c"]].linkFieldType||"MULTIPICKLIST"==object2FieldList[me[ns+"Link_Object__c"]][me[ns+"Link_Field__c"]].linkFieldType||"BOOLEAN"==object2FieldList[me[ns+"Link_Object__c"]][me[ns+"Link_Field__c"]].linkFieldType)||"Field Link"!=n)$(".editPicklistValue").each(function(){var e={},t=!1;if(e.Id=$(this).data("sfid"),"undefined"===e.Id&&(e.Id=void 0),e[ns+"Label__c"]=pe.removeNPChars($(this).val()),e[ns+"Label__c"]=e[ns+"Label__c"].replace(/\\/g,"/"),e[ns+"Label__c"]=e[ns+"Label__c"].replace(/"/g,"'"),e[ns+"Label__c"]=e[ns+"Label__c"].replace(/;/g,","),""===$(this).val()&&(t=!0),void 0!==e.Id||""!==e[ns+"Label__c"]){var n={};n.toDelete=t,n.questionValue=e,l.push(n)}}),ve.questionValues=l;else for(var d=ve.questionValues.length;d--;)ve.questionValues.length>0&&(void 0!==ve.questionValues[d].questionValue.Id?ve.questionValues[d].toDelete=!0:ve.questionValues.splice(d,1))}else for(var d=ve.questionValues.length;d--;)void 0!==ve.questionValues[d].questionValue.Id?ve.questionValues[d].toDelete=!0:ve.questionValues.splice(d,1);"new"==e&&(ve.toDelete=!1,ve.question=me,formData.allQuestionWrappers[t]=ve),pe.reloadFieldLinkFieldsUsed(),f(),pe.hideModal()}function l(e){me.hasOwnProperty("Id")&&null!==me.Id?(ve.toDelete=!0,ge.fadeOut()):(ge.fadeOut(),delete formData.allQuestionWrappers[e],setTimeout(function(){ge.remove()},1e3)),pe.reloadFieldLinkFieldsUsed()}function d(e){me={},me[ns+"Form_Template__c"]=CTL_VARS.templateID,me[ns+"RandomId__c"]=pe.randomString(8,"Aa#"),ve={questionValues:[]}}function c(e){var t=pe.randomString(8,"Aa#");me={},me[ns+"Form_Template__c"]=CTL_VARS.templateID,me[ns+"RandomId__c"]=t,me[ns+"Type__c"]="Space",ve={questionValues:[],question:me},formData.allQuestionWrappers[t]=ve}function u(){"Picklist"==$(this).val()||"Multi-select Picklist"==$(this).val()||"Radio Button List"==$(this).val()||"Checkbox List"==$(this).val()||"Yes/No"==$(this).val()?($(".editPicklistValue").is(":visible")||v(),$(".picklistValueContainer").slideDown(),"Yes/No"==$(this).val()&&p(),se($(this))):v(),"Text"==$(this).val()||"Long Text"==$(this).val()?(K($(this)),$("#numberFieldLength").hide()):(Y(),"Number"==$(this).val()||"Percent"==$(this).val()||"Currency"==$(this).val()?$("#numberFieldLength").show():$("#numberFieldLength").hide()),"Field Link"==$(this).val()?ne($(this)):Z()}function h(){var e=$(".editPicklistValue").last(),t={};t.Id=null,t[ns+"Order__c"]=$(".editPicklistValue").size()+1,e.next().hasClass("errorMessage")&&(e=e.next()),e.after('<label class="editPicklistValueLabel">Option '+t[ns+"Order__c"]+'</label><input type="text" maxlength="80" class="editPicklistValue"/>'),$(".editPicklistValue").last().focus(),e.closest(".modalColumn").scrollTop(e.closest(".modalColumn")[0].scrollHeight);var n={toDelete:!1};n.questionValue=t,ve.questionValues.push(n)}function p(){$(".editPicklistValueLabel").remove(),$(".editPicklistValue").remove();var e="";e+='<label class="editPicklistValueLabel">Option 1</label><input class="editPicklistValue" maxlength="80" value="Yes" type="text" />',e+='<label class="editPicklistValueLabel">Option 2</label><input class="editPicklistValue" maxlength="80" value="No" type="text" />',e+='<label class="editPicklistValueLabel">Option 3</label><input class="editPicklistValue" maxlength="80"  type="text" />',$(".picklistValueContainer").prepend(e)}function f(){$("#editQuestionName").val(""),$("#editFieldType").val(""),$("#editRequired").prop("checked",!1),$("#editCreateDiscovery").prop("checked",!1),$("#editLabel").val(""),$("#editTxtLabel").val(""),$("#editIndentation").val(""),$("#filterErrors").html(""),$("#editQuestion .editPicklistValueLabel:not(:eq(0))").remove(),$("#editQuestion .editPicklistValue:not(:eq(0))").remove(),$("#editQuestion .editPicklistValue:eq(0)").replaceWith('<input type="text" class="editPicklistValue"/>'),$(".picklistValueContainer").hide(),$("#conditionalTable > tbody tr").remove(),$("#displayFormula").val(""),$("#conditionalTableContainer").hide(),$("#editColor").spectrum("set","#000000"),Z(),oe(),$("#editViewable0").val("Always"),$("#editColor").val("#000000"),$("#editWeight").attr("checked",!1),K($("#editFieldType")),$("#editFieldLength").val(""),$("#editIntegerLength").val("14"),$("#editDecimalLength").val("0"),pe.removeErrorFields(),ve=null,me=null,fe=!1,ge=null}function v(){$("#editQuestion .editPicklistValue:not(:eq(0))").remove(),$("#editQuestion .editPicklistValueLabel:not(:eq(0))").remove(),$("#editQuestion .editPicklistValue:eq(0)").replaceWith('<input type="text" class="editPicklistValue" data-order="1"/>'),$(".picklistValueContainer").hide(),oe(),pe.removeErrorFields()}function m(e,t){"Question"==e?($(".editQuestionOrText").show(),$("#editTextLabel").hide(),$("#editQuestionFormTitle").html(t+" Question")):($(".editQuestionOrText").hide(),$("#editTextLabel").show(),$("#editQuestionFormTitle").html(t+" Free Text")),$("#editQuestion").fadeIn(),$("#fade").fadeIn(),"Question"==e?$("#editQuestionName").focus():$("#editTextLabel").focus()}function g(){"Always"!=$(this).val()?($("#conditionalTableContainer").show(),0===$("#conditionalTable > tbody tr").length&&_()):$("#conditionalTableContainer").hide()}function _(){var e=$("#conditionalTable > tbody tr").length;e>0?$("#filterLogicFunc").show():$("#filterLogicFunc").hide(),$("#conditionalTable > tbody").append(b(null,++e));var t;t=fe?ge.closest(".sectionBox").data().hasOwnProperty("sfid")?ge.closest(".sectionBox").data("sfid"):ge.closest(".sectionBox").data("randomid"):$("#insertedNewQuestion").closest(".sectionBox").data().hasOwnProperty("sfid")?$("#insertedNewQuestion").closest(".sectionBox").data("sfid"):$("#insertedNewQuestion").closest(".sectionBox").data("randomid");var n=$("#conditionalTable > tbody tr").last();n.find('.sectionPicklist option[value="'+t+'"]').prop("selected",!0),y(n.find(".sectionPicklist"))}function b(e,t){$("#conditionalTableContainer").show(),$("#removeRowLink").addClass("disabled_link");var n;n=null!==ge?ge.closest(".sectionBox").data("randomid"):$("#insertedNewQuestion").closest(".sectionBox").data("randomid");var i=null,a="",r="<tr><td>";return null!=e&&null!=e.parentID&&(n=F(e.parentID)),null!=e&&null!=e.validValues&&(i='value="'+e.validValues+'"'),null==e&&(a="disabled"),r+=t+"</td><td>",r+=w(n),r+="</td><td>",r+=null!=e&&null!=e.parentID?x(e.parentID,n):x(null,null),r+="</td><td>",r+="<input "+a+' class="conditionValues" type="text" '+i+" />",r+="</td></tr>"}function w(e){var t='<select class="sectionPicklist"><option value="">Select One</option>';return $(".sectionBox").each(function(n,i){var a,r="";a=$(i).data("randomid"),null!==e&&void 0!==e&&a===e&&(r="selected"),t+='<option value="'+a+'" '+r+">"+$(i).find("h2").text()+"</option>"}),t+="</select>"}function y(e){var t=e.parent().parent().children("td:nth-child(3)").find(".fieldPicklist"),n=e.parent().parent().children("td:nth-child(4)").find(".conditionValues");$(t).replaceWith(x(null,e.val())),""==e.val()?(n.val(""),n.prop("disabled",!0)):n.prop("disabled",!1)}function F(e){return null!=e&&void 0!=e?$('.questionBoxUsed[data-randomid="'+e+'"]').closest(".sectionBox").data("randomid"):null}function k(){var e=$("#conditionalTable > tbody tr").length;2===e&&$("#filterLogicFunc").hide(),e>1&&$("#conditionalTable > tbody tr:last").remove()}function L(e){if("Field Link"===e[ns+"Type__c"]||"Picklist"===e[ns+"Type__c"]||"Multi-select Picklist"===e[ns+"Type__c"]||"Radio Button List"===e[ns+"Type__c"]||"Checkbox List"===e[ns+"Type__c"]||"Yes/No"===e[ns+"Type__c"]){if("Field Link"!=e[ns+"Type__c"])return!0;var t=object2FieldList[e[ns+"Link_Object__c"]][e[ns+"Link_Field__c"]];return"PICKLIST"==t.linkFieldType||"MULTIPICKLIST"==t.linkFieldType||"BOOLEAN"==t.linkFieldType?!0:!1}return!1}function x(e,t){var n,i=$('.sectionBox[data-randomid="'+t+'"]'),a=[],r=i.find(".questionBoxUsed:visible"),s="";(null==t||""==t||void 0==t)&&(s="disabled");for(var o='<select class="fieldPicklist" '+s+'><option value="">Select One</option>',l=0;l<r.length;l++)void 0!==r[l]&&null!==r[l]&&(n=$(r[l]).data().hasOwnProperty("sfid")?formData.allQuestionWrappers[$(r[l]).data("sfid")].question:formData.allQuestionWrappers[$(r[l]).data("randomid")].question,L(n)&&n[ns+"RandomId__c"]!==me[ns+"RandomId__c"]&&a.push(r[l]));return null!=t&&$.each(a,function(t,n){var i="";null!=e&&void 0!=e&&e==$(n).data("randomid")&&(i="selected"),o+='<option value="'+$(n).data("randomid")+'" '+i+">"+$(n).find(".questionLabel").text()+"</option>"}),o+="</select>"}function T(){return D()&&C()?void $("#filterErrors").css("color","green").html("<p>Syntax is correct</p>"):!1}function C(){var e=[],t=!0;if($("#filterErrors").html(""),$("#conditionalTable tbody > tr").each(function(n,i){""===$(i).find(".sectionPicklist").val()&&(t=!1,e.push("If conditonal is selected, section is required for each row, remove unneeded rows or change Viewable to Always")),""===$(i).find(".fieldPicklist").val()&&(t=!1,e.push("If conditonal is selected, question is required, remove unneeded rows or change Viewable to Always")),""===$(i).find(".conditionValues").val()&&(t=!1,e.push("If conditonal is selected, value(s) are required, remove unneeded rows or change Viewable to Always"))}),e.length>0){var n="<p>Please address the following errors:</p>";n+='<ul class="conditionalErrors">';for(var i=0;i<e.length;++i)n+="<li>"+e[i]+"</li>";n+="</ul>",$("#filterErrors").css("color","red").html(n),$("#displayFormula").focus()}return t}function S(){var e=$("#conditionalTable tbody > tr").length;if(1===e||D()){var t=$("#displayFormula").val(),n=[];return t=t.toUpperCase().replace(/AND/g,"&&"),t=t.toUpperCase().replace(/OR/g,"||"),$("#conditionalTable > tbody tr").each(function(){var e=$(this).find("td:eq(0)").text(),t=$(this).find("td:eq(2) .fieldPicklist option:selected").val(),i=$(this).find("td:eq(3) .conditionValues").val();if(""!=i&&""!=t&&null!=i&&null!=t){var a={parentID:t,value:i,row:e};n.push(a)}}),JSON.stringify(q(t,n))}}function P(e){for(var t=new Array,n=new Array,i=0;i<e.length;i++){t.push(e[i].parentID);var a=e[i].parentID,r={};r[a]=e[i].validValues,n.push(r)}var s={};s.variables=n;var o={};return o.parentValues=t,e.length>1&&(s.operation="&&"),o.logic=s,o}function q(e,t){var n,i,a,r=[],s={},o={},l=/\(([^)]+)\)/g,d=e,c=[],u=[];o.variables=[];var h=[];if(e.indexOf("(")>-1){for(i=e.match(l),n=0;n<i.length;n++)a={},a.operation="&&",c=I(i[n],t),a.variables=c[0],u.push(c[1]),r.push(a),d=d.replace(i[n],"");if(o.operation="||",o.variables=r,d.length>0)for(h=d.split("||"),h=h.map(function(e,t){return e.trim()}),n=0;n<h.length;n++)""!==h[n]&&(a={},a.operation="||",c=I(h[n],t),a.variables=c[0],u.push(c[1]),o.variables.push(a))}else a={},a.operation=e.indexOf("&&")>-1?"&&":"||",c=I(e,t),a.variables=c[0],u.push(c[1]),o=a;return s.logic=o,s.parentValues=u.reduce(function(e,t){return e.concat(t)}),s}function I(e,t){var n,i,a=[],r=[],s={};for(""==e&&(s={},r.push(t[0].parentID),s[t[0].parentID]=t[0].value,a.push(s)),n=0;n<e.length;n++)if($.isNumeric(e[n]))for(i=0;i<t.length;i++)if(t[i].row===e[n]){s={},r.push(t[i].parentID),s[t[i].parentID]=t[i].value,a.push(s);break}return[a,r]}function A(){var e=[];return $("#conditionalTable > tbody tr").each(function(){var t=$(this).find("td:eq(0)").text(),n=$(this).find("td:eq(1) .sectionPicklist option:selected").val(),i=$(this).find("td:eq(2) .fieldPicklist option:selected").val();if(void 0!=n&&null!=n&&""!=n&&void 0!=i&null!=i&&""!=i){var a={row:t,section:n,question:i};e.push(a)}}),e}function D(){$("#filterErrors").html("");var e=!0,t=new Array,n=$("#displayFormula").val();if(null!=n&&""!=n?(V(n)||(e=!1,t.push("Please check your parenthesis")),O(n)||(e=!1,t.push("Invalid words in the formula")),j(n)||(e=!1,t.push("Invalid row numbers or logic does not include all values")),Q(n)||(e=!1,t.push("Nested Formulas are not allowed")),R(n)||(e=!1,t.push("The OR operator is not allowed in parenthesis")),N(n)||(e=!1,t.push("The AND operator is not allowed between parenthesis")),B(n)||(e=!1,t.push("The value must end with a number or )")),E(n)||(e=!1,t.push("The AND and OR operators cannot both exist withour parenthesis")),M(n)||(e=!1,t.push("The value must begin with a number or ("))):(e=!1,t.push("Filter logic field is required if there is more than 1 conditional row.")),t.length>0){var i="<p>Please address the following errors:</p>";i+='<ul class="conditionalErrors">';for(var a=0;a<t.length;++a)i+="<li>"+t[a]+"</li>";i+="</ul>",$("#filterErrors").css("color","red").html(i),$("#displayFormula").focus()}return e}function O(e){e=e.replace("("," "),e=e.replace(")"," "),e=e.replace(/\d+/g," ");for(var t=e.split(" "),n=0;n<t.length;n++)if("AND"!=t[n].toUpperCase().trim()&&"OR"!=t[n].toUpperCase().trim()&&""!=t[n].trim()&&")"!=t[n].trim()&&"("!=t[n].trim())return!1;return!0}function V(e){var t,n,i="()",a=[];for(t=0;n=e[t++];){var r,s=i.indexOf(n);if(~s)if(r=s%2?"closed":"open","closed"===r){if(!a.length||i.indexOf(a.pop())!=s-1)return!1}else a.push(n)}return!a.length}function E(e){return-1===e.indexOf("(")&&e.toUpperCase().indexOf("OR")>-1&&e.toUpperCase().indexOf("AND")>-1?!1:!0}function R(e){if(-1!=e.indexOf("(")){var t=/\(([^)]+)\)/g,n=e.match(t);if(null!==n)for(var i=0;i<n.length;++i)if(-1!=n[i].toUpperCase().indexOf("OR"))return!1}return!0}function N(e){if(-1!=e.indexOf("(")){var t=/\)([^)]+)\(/g,n=e.match(t);if(null!==n)for(var i=0;i<n.length;++i)if(-1!=n[i].toUpperCase().indexOf("AND"))return!1}return!0}function Q(e){return-1!=e.indexOf("((")||-1!=e.indexOf("))")?!1:!0}function B(e){var t=["1","2","3","4","5","6","7","8","9",")"];return e=e.substring(e.length-1,e.length),-1==$.inArray(e,t)?!1:!0}function M(e){var t=["1","2","3","4","5","6","7","8","9","("];return e=e.substring(0,1),-1==$.inArray(e,t)?!1:!0}function j(e){var t,n=A(),i=new Array;for(t=0;t<e.length;t++)""+parseInt(e[t])!="NaN"&&i.push(parseInt(e[t]));for(t=1;t<n.length+1;t++)if(-1===i.indexOf(t))return!1;if(n.length>i.length)return!1;if(n.length>0&&i.length>0){for(var t=0;t<i.length;++t){for(var a=!1,r=0;r<n.length;++r)i[t]==n[r].row&&(a=!0);if(!a)return!1}return!0}return!1}function U(e){var t=!0;return("Number"==e||"Percent"==e||"Currency"==e)&&(($("#editDecimalLength").val()>4||$("#editIntegerLength").val()<0)&&(pe.addErrorToField($("#editDecimalLength"),"The value must be between 0 and 4"),$("#editDecimalLength").focus(),t=!1),($("#editIntegerLength").val()>14||$("#editIntegerLength").val()<1)&&(pe.addErrorToField($("#editIntegerLength"),"The value must be between 1 and 14"),$("#editIntegerLength").focus(),t=!1)),t}function H(e){var t=[],n=1,i="";if(void 0!=e.operation&&null!=e.operation){var a=W(e.operation);if(void 0!=e.variables&&void 0!=e.variables[0].operation)for(var r=0;r<e.variables.length;++r){var s,o,l,d,c=e.variables[r].operation,u=e.variables[r].variables,h=Object.keys(u[0]);if(u.hasOwnProperty("1")&&(s=Object.keys(u[1])),null==o){d={parentID:h[0],row:n,validValues:u[0][h]},t.push(d),o=n;var p=b(d,d.row);$("#conditionalTable > tbody").append(p),++n}if(null==l&&u.hasOwnProperty(1)){d={parentID:s[0],row:n,validValues:u[1][s]},t.push(d),l=n;var p=b(d,d.row);$("#conditionalTable > tbody").append(p),++n}i+=l?"("+o+" "+W(c)+" "+l+")":o,r+1!=e.variables.length&&(i+=" "+a+" "),o=null,l=null}else{var f,p,v=function(e){for(var t,n=[],t=0;t<e.length;t++)n.push(Object.keys(e[t]));return n.reduce(function(e,t){return e.concat(t)})},m=v(e.variables);for(f=0;f<m.length;f++){var g=m[f],_=e.variables[f];d={parentID:g,row:n,validValues:_[g]},t.push(d),p=b(d,d.row),$("#conditionalTable > tbody").append(p),i+=n===m.length?n:n+" "+W(e.operation)+" ",++n}}}else{var w=Object.keys(e.variables[0]);d={parentID:w[0],row:n,validValues:e.variables[0][w]};var p=b(d,d.row);$("#conditionalTable > tbody").append(p)}null!=i&&"1"!==i?($("#displayFormula").val(i),$("#filterLogicFunc").show()):($("#displayFormula").val(""),$("#filterLogicFunc").hide())}function W(e){return"&&"==e?"AND":"||"==e?"OR":void 0}function z(){var e;e=$(".editQuestionOrText").is(":visible")?["editQuestionName"]:["editTxtLabel"];var t=$("#editFieldType").val();if(("Picklist"==t||"Multi-select Picklist"==t||"Radio Button List"==t||"Checkbox List"==t)&&e.push("editPicklistValue"),(-1!=t.indexOf("Currency")||-1!=t.indexOf("Percent")||-1!=t.indexOf("Number"))&&(e.push("editIntegerLength"),e.push("editDecimalLength")),"Always"!==$("#editViewable0").val()){if(C()===!1)return!1;var n=$("#conditionalTable tbody > tr").length;if(1===n&&($("#displayFormula").val(""),$("#filterErrors").html("")),n>1&&T()===!1)return!1}else $("#filterErrors").html("");return"Field Link"==$("#editFieldType").val()&&e.push("editObjectPicklist","editFieldPicklist"),pe.requiredFieldsComplete(e)}function J(){var e=!0;return $(".editPicklistValue").each(function(t,n){$(this).val().indexOf(",")>-1?(pe.addErrorToField($(this),"Commas are not allowed in picklist values."),$(this).focus(),e=!1):$(this).val().indexOf(";")>-1?(pe.addErrorToField($(this),"Semi-colons are not allowed in picklist values."),$(this).focus(),e=!1):$(this).val().indexOf("\\")>-1?(pe.addErrorToField($(this),"Backslashes are not allowed in picklist values. Perhaps a forward slash?"),$(this).focus(),e=!1):$(this).val().indexOf('"')>-1&&(pe.addErrorToField($(this),"Double quotes are not allowed in picklist values. Perhaps a single quote?"),$(this).focus(),e=!1)}),e}function K(e){var t=e.closest(".modalColumn").find("#editFieldLength");if(0===t.length){var n='<label for="editFieldLength">Number of total characters</label>';n+='<input type="number" maxlength="2" id="editFieldLength"/>',
e.after(n)}}function Y(){$("#editFieldLength").each(function(){$(this).prev().remove(),$(this).remove()})}function Z(){$("#editObjectPicklist,#objectPicklist").each(function(){$(this).prev().remove().end().remove()}),$("#editFieldPicklist,#fieldPicklist").each(function(){$(this).prev().remove().end().remove()})}function X(e){$("#editFieldPicklist").prev().remove().end().remove();var t='<label for="editFieldPicklist">Field Link Field</label><select id="editFieldPicklist"><option value="">Select One</option>';for(var n in object2FieldList[e])t+='<option value="'+object2FieldList[e][n].linkFieldName+'">'+object2FieldList[e][n].linkFieldLabel+" ("+object2FieldList[e][n].linkFieldName+")</option>";t+="</select>",$("#editObjectPicklist").after(t)}function G(){var e=$("#editObjectPicklist :selected").data("objecttype");""!==e?(X(e),$("#editFieldPicklist option").sort(pe.NASort).appendTo("#editFieldPicklist"),$("#editFieldPicklist").val(""),re()):ee()}function ee(){$("#editFieldPicklist").each(function(){$(this).prev().remove(),$(this).remove()})}function te(e){ae(e.val(),!1),ie(e.val())}function ne(e){var t=e.parent().find("#editObjectPicklist");if(0===t.length){var n='<label for="editObjectPicklist">Field Link Lookup</label>';n+='<select class="fieldLinkObject" id="editObjectPicklist"><option value="">Select One</option>';for(var i in objectName2ObjectInfoList)if(objectName2ObjectInfoList.hasOwnProperty(i))for(var a=0;a<objectName2ObjectInfoList[i].length;a++)n+='<option value="'+objectName2ObjectInfoList[i][a].lookupName+'" data-objecttype="'+i+'">'+objectName2ObjectInfoList[i][a].lookupName+"</option>";n+="</select>",e.after(n)}}function ie(e){var t=$("#editObjectPicklist :selected").data("objecttype"),n=object2FieldList[t][e];if("PICKLIST"==n.linkFieldType||"MULTIPICKLIST"==n.linkFieldType||"BOOLEAN"==n.linkFieldType){se($("#editFieldType"));var i=n.linkFieldPickListVals;if("PICKLIST"==n.linkFieldType||"MULTIPICKLIST"==n.linkFieldType){var a=1;if(void 0!=$(".editPicklistValue")&&null!=$(".editPicklistValue")&&$(".editPicklistValue").length>1?$(".editPicklistValue").each(function(){for(var e=!1,t=1;i>t;++t)i[t]==$(this).text()&&(e=!0,i.splice(t,1),++a);e||$(this).val("")}):($(".editPicklistValueLabel").remove(),$(".editPicklistValue").remove()),i.length>0){$(".editPicklistValue").val("");for(var r=0;r<i.length;++r)$("#editQuestion .addAnotherValue").before($('<label class="editPicklistValueLabel">Option '+a+'</label><input type="text" class="editPicklistValue" maxlength="80" value="'+i[r]+'"  data-order="'+a+'" />')),++a}}else{var s=!1,o=!1;void 0!=$(".editPicklistValue")&&null!=$(".editPicklistValue")&&$(".editPicklistValue").length>1&&$(".editPicklistValue").each(function(){"True"==$(this).text()||"False"==$(this).text()?("True"==$(this).text()&&(s=!0),"False"==$(this).text()&&(o=!0)):$(this).val("")}),s||$("#editQuestion .addAnotherValue").before($('<label class="editPicklistValueLabel">Option 1</label><input type="text" class="editPicklistValue" maxlength="80" value="True" />')),o||$("#editQuestion .addAnotherValue").before($('<label class="editPicklistValueLabel">Option 2</label><input type="text" class="editPicklistValue" maxlength="80"  value="False" />'))}}else v()}function ae(e,t){var n=$("#editRequired");"true"==fieldLinkField2Required[e]?(n.is(":checked")&&1!=t||(n.addClass("systemChecked"),n.prop("checked",!0)),n.prop("disabled",!0)):(n.prop("disabled",!1),n.hasClass("systemChecked")&&(n.prop("checked",!1),n.removeClass("systemChecked")))}function re(){var e,t,n=$("#editObjectPicklist").val(),i=[];if(fieldLinkFieldsUsed.length>0&&null!=n&&""!=n&&void 0!=n)for(t=0;t<fieldLinkFieldsUsed.length;++t)e=fieldLinkFieldsUsed[t].split("."),e[0]==n&&i.push(e[1]);i.length>0&&$("#editFieldPicklist option").each(function(){for(t=0;t<i.length;++t)if(i[t]==$(this).val()&&i[t]!==$("#editFieldPicklist").val()){$(this).remove();break}})}function se(e){if(0===$("#editCreateDiscovery").length){var t='<label for="editCreateDiscovery">Create Discovery for this Question</label>';t+='<input type="checkbox" id="editCreateDiscovery"/>',e.prev().before(t)}}function oe(){$("#createDiscovery,#editCreateDiscovery").each(function(){$(this).prev().remove(),$(this).remove()})}function le(e,t){t===!0?0==e.find(".fa-share-square").length&&e.find(".editLink").before('<a class="tooltip" data-title="Create Discoveries is selected for this Question"><i class="fa fa-share-square"></i></a>'):e.find(".tooltip").remove()}function de(){$(".questionList").sortable({connectWith:".questionList",cursor:"move",placeholder:"questionPlaceHolder",start:function(e,t){t.placeholder.html("<span>Drop Here</span>")},receive:function(e,t){t.sender.context.classList.contains("questionList")||($("#numberFieldLength").hide(),t.sender.context.classList.contains("newText")?(m("Text","New"),d()):t.sender.context.classList.contains("newSpace")?c():(m("Question","New"),d()))},update:function(e,t){$(".draggableNewQuestion").eq(1).replaceWith(ce()),$(".draggableNewText").eq(1).replaceWith(ue()),$(".draggableNewSpace").eq(1).replaceWithPush(he()),t.item.attr("style","")}})}function ce(){return'<li id="insertedNewQuestion" class="questionBox">New Question</li>'}function ue(){return'<li id="insertedNewQuestion" class="questionBox text">New Text</li>'}function he(){var e='<li id="blankSpace" class="questionBoxUsed blankSpace" data-randomid="'+me[ns+"RandomId__c"]+'">';return e+='<div class="spaceLabel">Blank Space</div>',e+='<div class="closeButton removeQuestion"><i class="fa fa-times"></i></div></li>'}var pe=e("./util"),fe=!1,ve=null,me=null,ge=null;t.exports={editQuestion:i,cancelQuestion:r,removeQuestion:a,updateQuestion:s,handleTypePicklistChange:u,handleViewableChange:g,handlePicklistOptionAdd:h,handleFieldLinkFieldPicklistChange:te,updateFieldLinkFieldPicklist:G,handleDepSectionChange:y,showModal:m,addRowToViewableSection:_,removeConditionalRow:k,checkFilterLogicSyntax:T,makeQuestionListsSortable:de}},{"./util":7}],6:[function(e,t,n){"use strict";function i(){g={},g[ns+"Form_Template__c"]=CTL_VARS.templateID,g[ns+"RandomId__c"]=p.randomString(8,"Aa#"),m={}}function a(e){_=e.closest(".sectionBox");var t=_.data().hasOwnProperty("sfid")?_.data("sfid"):_.data("randomid");v=!0,m=formData.allSectionWrappers[t],g=m.section;$("label[for=editColumns], #editColumns").show().val(g[ns+"Number_of_Columns__c"]),$("#editName").val(g.Name),$("#editPageBreak").prop("checked",g[ns+"Page_Break__c"]),$("#editSection h2").text("Edit Section"),$("#editSection").fadeIn(),$("#fade").fadeIn()}function r(){var e=["editName"];if(p.requiredFieldsComplete(e)===!1)return!1;if(v===!1){var t=g[ns+"RandomId__c"],n='<li class="sectionBox"';n+='data-randomid="'+t+'">',n+='<div class="bannerHeader">',n+="<h2></h2>",n+='<a class="editLink editSection">Edit</a>',n+='<div class="closeButton removeSection"><i class="fa fa-times"></i></div>',n+="</div>",n+="<div>",n+='<ul class="questionList"></ul>',n+="</div>",n+="</li>",_=$("#insertedNewSection").replaceWithPush(n),s("new",t)}else s("edit")}function s(e,t){var n=$("#editName"),i=$("#editPageBreak"),a=$("#editColumns").val(),r=_.find(".questionList");if("1"==a&&_.find(".questionColumn").length>0&&(_.find(".questionColumn").removeClass("questionColumn rightBorder"),r.append(_.find(".questionList").eq(1).children()),r.eq(1).parent().remove()),"2"==a&&0===_.find(".questionColumn").length){var s=g.Id;r.parent().addClass("questionColumn rightBorder"),r.parent().after('<div class="questionColumn"><ul class="questionList" data-sfid="'+s+'"></ul></div>')}f.makeQuestionListsSortable(),_.find("h2").text(n.val().trim()),g[ns+"Page_Break__c"]=i.prop("checked"),g[ns+"Page_Break__c"]!==!0||_.children().last().hasClass("page-break")?g[ns+"Page_Break__c"]===!1&&_.children().last().hasClass("page-break")&&_.children().last().remove():_.children().last().after('<div class="page-break"><span>Page Break</span></div>'),g[ns+"Number_of_Columns__c"]=a,g.Name=n.val().trim(),"new"===e&&(m.toDelete=!1,m.section=g,formData.allSectionWrappers[t]=m),p.hideModal(),c()}function o(){$("#insertedNewSection").remove(),c(),p.hideModal()}function l(e){_=e.closest(".sectionBox");var t=_.data().hasOwnProperty("sfid")?_.data("sfid"):_.data("randomid");m=formData.allSectionWrappers[t],g=m.section,confirm("Are you sure you wish to remove this Section and all its questions?")&&(g.hasOwnProperty("Id")&&null!==g.Id?(m.toDelete=!0,_.fadeOut(),d(_)):(_.fadeOut(),delete formData.allSectionWrappers[t],d(_),setTimeout(function(){_.remove()},1e3)),p.reloadFieldLinkFieldsUsed())}function d(e){e.find(".questionBoxUsed").each(function(e,t){var n;$(t).data().hasOwnProperty("sfid")?(n=$(t).data("sfid"),formData.allQuestionWrappers[n].toDelete=!0,$(t).hide()):(n=$(t).data("randomid"),delete formData.allQuestionWrappers[n],$(t).remove())})}function c(){$("#editName").val(""),$("#editPageBreak").prop("checked",!1),$("#editColumns").val("1"),$("label[for=editColumns], #editColumns").show(),$("#editObjectPicklistsContainer").hide(),p.removeErrorFields(),v=!1,m=null,g=null,_=null}function u(){$(".sectionList").sortable({cursor:"move",items:"> li",placeholder:"sectionPlaceHolder",start:function(e,t){t.placeholder.html("<span>Drop Here</span>")},receive:function(e,t){$("#editSection").fadeIn(),$("#editSection h2").text("New Section"),$("#fade").fadeIn(),$("#editName").focus(),i()},update:function(e,t){$(".draggableNewSection").eq(1).replaceWith(h()),$(".sectionBox").index($("#insertedNewSection"))}})}function h(){return'<li id="insertedNewSection" class="sectionBox">New Section</li>'}var p=e("./util"),f=e("./question"),v=!1,m=null,g=null,_=null;t.exports={initNewSection:i,editSection:a,updateSection:r,removeSection:l,cancelSection:o,makeSectionListsSortable:u}},{"./question":5,"./util":7}],7:[function(e,t,n){"use strict";function i(e,t){var n="";t.indexOf("a")>-1&&(n+="abcdefghijklmnopqrstuvwxyz"),t.indexOf("A")>-1&&(n+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),t.indexOf("#")>-1&&(n+="0123456789"),t.indexOf("!")>-1&&(n+="~`!@#$%^&*()_+-={}[]:\";'<>?,./|\\");for(var i="",a=e;a>0;--a)i+=n[Math.round(Math.random()*(n.length-1))];return i}function a(e,t){return"Select One"!=e.innerHTML?e.innerHTML.substr(0,1).toLowerCase()>t.innerHTML.substr(0,1).toLowerCase()?1:-1:void 0}function r(e){var t=!1;return $.each(e,function(e,n){var i=$("#"+n);0==i.length&&(i=$("."+n)),""==i.val()?(s(i.eq(0),"This field is required"),i.eq(0).focus(),t=!0):i.eq(0).next().hasClass("errorMessage")&&i.eq(0).next().remove()}),1==t?!1:(o(),!0)}function s(e,t){e.next().hasClass("errorMessage")||e.after('<div class="errorMessage"><label>Error :</label><p class="fieldError">'+t+"</p></div>")}function o(){$(".errorMessage").remove()}function l(e){return e.replace(/[\x00-\x1F\x7F-\x9F]/g," ").trim()}function d(){$(".picklistValueContainer").fadeOut(),$("#editQuestion").fadeOut(),$("#editSection").fadeOut(),$("#savingStatus").fadeOut(),$("#fade").fadeOut()}function c(){fieldLinkFieldsUsed=[],Object.keys(formData.allQuestionWrappers).forEach(function(e){if(formData.allQuestionWrappers.hasOwnProperty(e)&&formData.allQuestionWrappers[e].toDelete!==!0){var t=formData.allQuestionWrappers[e].question;t.hasOwnProperty(ns+"Link_Field__c")&&null!==t[ns+"Link_Field__c"]&&fieldLinkFieldsUsed.push(t[ns+"Link_Lookup__c"]+"."+t[ns+"Link_Field__c"])}})}function u(e,t){for(var n=t.length;n--;)if(-1!=e.indexOf(t[n]))return!0;return!1}function h(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function p(e){return $("<div/>").html(e).text()}function f(e){return e.length>30?e.substr(0,30)+'<span class="hoverText" alt="'+e+'" title="'+e+'">...</span>':e}function v(e){var t=["1","2","3","4","5","6","7","8","9","a","A","n","N","d","D","o","O","r","R","(",")","Backspace"," ","Spacebar","ArrowLeft","ArrowRight"];if(void 0!=e.key){if(-1==$.inArray(e.key,t))return!1}else if(-1==$.inArray(String.fromCharCode(e.keyCode),t))return!1}t.exports={randomString:i,NASort:a,requiredFieldsComplete:r,addErrorToField:s,removeErrorFields:o,removeNPChars:l,hideModal:d,reloadFieldLinkFieldsUsed:c,containsAny:u,replaceHTMLEntities:h,cleanHTMLChars:p,truncateLongTextIntoElipsesSpan:f,filterInvalidFilterKeysOnPress:v}},{}],8:[function(e,t,n){"use strict";function i(){var e={status:!0};o._loadPageSuccess(sfEnv.previewForm,e),s("#previewStatus").off(),s("#completeFormPage #savingStatus").hide(),s(".previewCloseBtn").on("click",a)}function a(){s("#fade").hide(),s("#previewStatus").hide(),s("#formContent").empty(),s(".paginationBlock").remove(),l.answerStore={},l.depQuestionLogicStore={},l.hasSignature={},l.questionStore={},l.regExRules=[],l.formRender.allPages=[],l.formRender.currentPage=1,l.formRender.fieldLinkUpdateArray=[],l.formRender.setFormColor=!1,l.formRender.totalPages=0,s("#formContent").removeClass("changed-input")}var r={previewOpen:i},s=jQuery,o=e("./src/vfr.js"),l=e("./src/dataStore.js");sfEnv.isPreview||s(document).ready(function(){var t=sfEnv.isFormDetail,n=e("./src/app.js"),i=e("./src/formDetail");if(t)s("#lockBtn").on("click",i.lockForm),s("#deleteBtn").on("click",i.deleteForm),s("#archiveBtn").on("click",i.archiveForm),s("#unarchiveBtn").on("click",i.unarchiveForm);else{s("#normalSaver").on("click",n.normalSaveBtn),s("#quickSaver").on("click",n.quickSaveBtn),s("#cancelBtn").on("click",n.cancelBtn);var a=s(".container").width();s(".button-row-form").css("width",a)}n.loadPage()}),t.exports=r},{"./src/app.js":10,"./src/dataStore.js":11,"./src/formDetail":14,"./src/vfr.js":19}],9:[function(e,t,n){"use strict";function i(e,t){var n=void 0,i=void 0;for(i in s.answerStore){var a=s.answerStore[i];a[r+"Question__c"]===e&&(a[r+"Form__c"]===t||a[r+"Form_Mobile_ID__c"]===t)&&(n=a)}return n}var a={findAnswers:i},r=sfEnv.namespace,s=e("./dataStore");t.exports=a},{"./dataStore":11}],10:[function(e,t,n){"use strict";function i(){d.saveMsgOn(),v.contextualSpinnerText("saveForm"),setTimeout(function(){c("#mainForm").submit()},1)}function a(){d.saveMsgOn(),v.contextualSpinnerText("saveForm"),p.wasQuickSave=!0,setTimeout(function(){c("input, select").filter("[required]").attr({quickSaveReq:!0,required:!1}),c("[dbrequired]").attr("required",!0),c(".errorSummary-mobile").css("display","none"),c(".errorSummary").css("display","none"),c("#mainForm").submit(),c("input, select").filter("[quickSaveReq=true]").attr("required",!0).removeAttr("quickSaveReq")},1)}function r(){f.returnToDetailPage()}function s(){v.contextualSpinnerText("clear"),c("#savingStatus").show()}function o(){c("#savingStatus").hide()}function l(){var e=[];delete u.attributes,delete u[h+"Form_Template__r"].attributes,delete u[h+"Contact__r"],e.push(u),m.loadPageVFR(e)}var d={normalSaveBtn:i,quickSaveBtn:a,cancelBtn:r,saveMsgOn:s,saveMsgOff:o,loadPage:l},c=jQuery,u=sfEnv.thisForm,h=sfEnv.namespace,p=e("./dataStore"),f=e("./formDetail"),v=e("./util"),m=e("./vfr");t.exports=d},{"./dataStore":11,"./formDetail":14,"./util":17,"./vfr":19}],11:[function(e,t,n){"use strict";n.wasQuickSave=!1,n.onMobile=!1,n.hasSignature=!1,n.prevSaveErrors=!1,n.questionStore={},n.answerStore={},n.regExRules=[],n.depQuestionLogicStore={};var i={};i.allPages=[],i.currentPage=1,i.totalPages=0,i.fieldLinkUpdateArray=[],i.setFormColor=!1,n.formRender=i},{}],12:[function(e,t,n){"use strict";function i(e,t,n,a){if(!l.isEmptyObject(c.depQuestionLogicStore)){var r=c.depQuestionLogicStore[t],s=void 0,u=void 0,h=void 0,p=void 0,f=void 0,v=void 0;e&&"checkbox"===e.attr("type")&&(e=e.closest(".table-checkbox"));for(v in r){var m=JSON.parse(JSON.stringify(r[v].logic));for(s=0;s<r[v].parentValues.length;s++)u=r[v].parentValues[s],h=u===t?e.closest("div.control-group").hasClass("hiddenByDep")?null:o._getFormAnswer(u,e):l('#formContent div.control-group[data-randomid="'+u+'"]').hasClass("hiddenByDep")?null:o._getFormAnswer(u),m=o._checkAnswer_UpdateJSON(m,h,u);p=new d,f=p.execute({show:m});var g=l('#formContent [data-randomid="'+v+'"]');f.show===!0?"slow"===n?(g.slideDown().removeClass("hiddenByDep"),g.find("input, select, textarea").removeClass("ignore")):(g.show().removeClass("hiddenByDep"),g.find("input, select, textarea").removeClass("ignore")):"slow"===n?(g.slideUp().addClass("hiddenByDep"),g.find("input, select, textarea").addClass("ignore")):(g.hide().addClass("hiddenByDep"),g.find("input, select, textarea").addClass("ignore")),i(g.find(".formInput"),v)}}}function a(e,t){var n,i,a,r,s=t?t:l('#formContent [data-randomid="'+e+'"]').find(".formInput");return s.hasClass("table-checkbox")?(i=[],r=s.find("input:checked"),r.hasClass("boolean-checkbox")?i.push(!0):r.map(function(e,t){i.push(t.value.toLowerCase())})):n=s.hasClass("table-radio")?s.find("input:checked").val():s.val(),n?(n=n instanceof Array?n.map(function(e){return e.toLowerCase()}):n.toLowerCase(),a=n):a=i,a=n?n:i,a instanceof Array&&""===a[0]&&(a=null),a}function r(e,t,n){var i,a=[];e.hasOwnProperty("variables")&&!e.hasOwnProperty("operation")&&(e.operation="||"),t&&(t instanceof Array?t.forEach(function(e){return"string"==typeof e?e.toLowerCase():e}):t=t.toLowerCase());for(var r in e)if(e.hasOwnProperty(r)&&"object"==typeof e[r]&&(e.hasOwnProperty("variables")&&!e.hasOwnProperty("operation")&&(e.operation="||"),e[r]instanceof Array))for(var s=0;s<e[r].length;s++)if("object"==typeof e[r][s]&&Object.keys(e[r][s])==n){var l=e[r][s][n].toLowerCase();if(l==t)e[r][s]=!0;else if(t instanceof Array&&t.length){i=!1;var d,c=l.split(","),u=[];for(d=0;d<c.length;d++)p=c[d],p=p.trim(),u.push(p);t.forEach(function(e){u.indexOf(e)>-1&&(i=!0)}),e[r][s]=i?!0:!1}else if("string"==typeof l&&l.indexOf(",")>-1){var h,p,c=l.split(","),u=[],f="string"==typeof t&&t?t.trim():null;for(h=0;h<c.length;h++)p=c[h],p=p.trim(),u.push(p);c.indexOf(t)>-1||u.indexOf(f)>-1?e[r][s]=!0:e[r][s]=!1}else e[r][s]=!1}else a=a.concat(o._checkAnswer_UpdateJSON(e[r][s],t,n));return e}function s(e,t){var n;for(n=0;n<t.parentValues.length;n++){var i=t.parentValues[n];c.depQuestionLogicStore.hasOwnProperty(i)||(c.depQuestionLogicStore[i]={}),c.depQuestionLogicStore[i][e]=t}}var o={toggleChildFields:i,buildDepQuestionLogicStore:s,_getFormAnswer:a,_checkAnswer_UpdateJSON:r},l=jQuery,d=e("json-logic"),c=e("./dataStore");t.exports=o},{"./dataStore":11,"json-logic":21}],13:[function(e,t,n){"use strict";function i(e,t){var n=e.template,i=e.form;h.formRender.fieldLinkUpdateArray=[];var a=i.hasOwnProperty(k+"Contact__c")?i[k+"Contact__c"]:i[k+"Contact_Mobile_ID__c"],r=i.hasOwnProperty("Id")?i.Id:i[k+"Mobile_ID__c"],s=1,o="",l=F("#formContent");F("body.sfdcBody").length>0&&F(".dataStore.formRender.currentPageContainer").css("background-color","#fff"),n.hasOwnProperty("bannerImage")&&""!==n.bannerImage&&l.append('<img src="data:image/jpeg;base64,'+n.bannerImage+'"/>'),h.formRender.setFormColor=n.hasOwnProperty("formColor")&&""!==n.formColor?!0:!1,l.append('<h1 class="formName" data-contactid='+a+' data-formid="'+r+'">'+n.formName+"</h1>"),F.each(n.sections,function(e,t){o+='<div class="form-section"><h2 class="title-form-section">'+t.sectionName+"</h2>",o+=t.hasOwnProperty("allQuestions")&&t.allQuestions.length>0?p.buildStandardSection(t,i):"</div>",t.pageBreak===!0&&(h.formRender.allPages.push('<div class="pageContent page'+s+'">'+o+"</div>"),o="",s++)}),h.formRender.allPages.length>0?(""!==o&&h.formRender.allPages.push('<div class="pageContent page'+s+'">'+o+"</div>"),l.append(h.formRender.allPages)):l.append(o);for(var d=Object.keys(h.depQuestionLogicStore),c=0;c<d.length;c++){var m=d[c];F("#formContent").find("[data-randomid="+m+"]").addClass("parentQuestion")}h.hasSignature===!0&&(F("#mainForm").trigger("esig"),h.hasSignature=!1),F('[class^="page"]').hide(),F(".page1").show(),h.formRender.totalPages=h.formRender.allPages.length,h.formRender.totalPages>1?(u._buildPagination(),F(".dataStore.formRender.currentPageContainer").addClass("with-pagination"),h.onMobile&&F(".errorSummary-mobile").css("margin-top","10px")):F(".dataStore.formRender.currentPageContainer").removeClass("with-pagination"),F(".parentQuestion, .childQuestion").each(function(){f.toggleChildFields(F(this).find(".formInput"),F(this).data("randomid"),"fast")}),h.formRender.setFormColor?F(".form-section").css({border:"1px solid "+n.formColor,"border-top":"20px solid "+n.formColor,"border-bottom":"20px solid "+n.formColor}):F(".form-section").css({border:"1px solid rgba(39, 174, 96,1.0)","border-top":"1px solid rgba(39, 174, 96,1.0)","border-bottom":"1px solid rgba(39, 174, 96,1.0)"}),l.on("change keyup keydown","input, textarea, select",function(e){l.addClass("changed-input")}),l.on("mouseup","input.date, input.dateTime, canvas",function(e){l.addClass("changed-input")}),h.onMobile||F(window).on("beforeunload",function(){return l.hasClass("changed-input")?"You have unsaved changes!":void 0}),v.setupValidationRules(),F("#loadingMessage").hide(),t&&t()}function a(){L===!0&&(F(".pageContent").show(),F(".paginationBlock").remove(),F(".dataStore.formRender.currentPageContainer").removeClass("with-pagination"),F(".controls select[multiple]").each(function(e,t){F(t).prop("size",F(t).find("option").length),F(t).css("max-height","100%")})),L===!1?!function(){v.setupFormValidation(u._saveThisForm),F(".sigPad").each(function(){var e=F(this).find(".output").val()||"{}";F(this).signaturePad({drawOnly:!0,lineTop:70,validateFields:!1}).regenerate(e)}),F('input[type="datetime-local"]').each(function(e,t){if(F(this).prop("type","text"),""!==F(this).val()&&null!==F(this).val()){var n=new Date(F(this).val());F(this).val(g(n))}F(this).parent().css("position","relative"),F(this).datetimepicker({showClear:!0})}),F('input[type="date"]').each(function(e,t){if(F(this).prop("type","text"),""!==F(this).val()&&null!==F(this).val()){var n=new Date(F(this).val());F(this).val(_(n))}F(this).parent().css("position","relative"),F(this).datetimepicker({showClear:!0,format:"MM/DD/YYYY"})});for(var e=Object.keys(h.depQuestionLogicStore),t=function(t){F("[data-randomid="+e[t]+"]").addClass("parentQuestion").find("select, table td input").on("change",function(){f.toggleChildFields(F(this),e[t],"slow")})},n=0;n<e.length;n++)t(n)}():(F("select, input, textarea").prop("disabled",!0),F(".sigPad").each(function(){var e=F(this).find(".output").val()||"{}";F(this).signaturePad({displayOnly:!0,lineTop:70}).regenerate(e)}),F('input[type="datetime-local"]').each(function(e,t){if(F(this).prop("type","text"),""!==F(this).val()&&null!==F(this).val()){var n=new Date(F(this).val());F(this).val(g(n))}}),F('input[type="date"]').each(function(e,t){if(F(this).prop("type","text"),""!==F(this).val()&&null!==F(this).val()){var n=new Date(F(this).val());F(this).val(_(n))}}))}function r(){var e=[];e=u._getAnswers(),u._saveAnswers(e)}function s(e){var t,n={},i=F(".answerValue"),a=[],r=[],s=F("h1.formName").attr("data-formid"),o=F(".hiddenByDep").map(function(){return F(this).find("[data-questionid]").attr("data-questionid")}).get(),l=(i.length,!1);F("#patientMedsContainer");for(t=0;t<i.length;t++){var d,c,u=i[t],p=F(u).data("questionid"),f=h.questionStore[p].question,v=h.questionStore[p],m=f[k+"Type__c"],g=!1;"Field Link"===m?(m="Long_Text_Answer__c"===f[k+"Link_Answer_Field__c"]?v.fieldLinkParentType:f[k+"Link_Answer_Field__c"],c=!0):c=!1,d=y.findAnswers(f.Id,s);var _,L,x=d[k+"hidden_by_dep__c"],T=o.indexOf(p)>-1?!0:!1,$=x!==T;if(d[k+"hidden_by_dep__c"]=T,"Text"===m||"Text_Answer__c"==m)_=k+"Text_Answer__c",L=F(u).val(),(d[_]!==L||h.prevSaveErrors||$)&&(g=!0,d[_]=L);else if("Currency"===m||"Currency_Answer__c"==m)_=k+"Currency_Answer__c",L=F(u).val(),(d[_]!==L||h.prevSaveErrors||$)&&(g=!0,d[_]=L);else if("Picklist"===m||"PICKLIST"==m)_=k+"Long_Text_Answer__c",L=F(u).val(),(d[_]!==L||h.prevSaveErrors||$)&&(g=!0,d[_]=L);else if("Date"===m||"Date_Answer__c"==m){var C=F(u).val(),S=b(C);_=k+"Date_Answer__c",""!==C?(d[_]!==S||h.prevSaveErrors||$)&&(g=!0,d[_]=S):(d[_]!==S||h.prevSaveErrors||$)&&(delete d[k+"Date_Answer__c"],d.nullDate=!0,g=!0)}else if("Date/Time"===m||"Date_Time_Answer__c"==m){var P=F(u).val(),q=w(P);_=k+"Date_Time_Answer__c",""!==P?(d[_]!==q||h.prevSaveErrors||$)&&(g=!0,d[_]=q):(d[_]!==q||h.prevSaveErrors||$)&&(delete d[k+"Date_Time_Answer__c"],d.nullDate=!0,g=!0)}else"Email"===m||"Email_Answer__c"==m?(_=k+"Email_Answer__c",L=F(u).val(),(d[_]!==L||h.prevSaveErrors||$)&&(g=!0,d[_]=L)):"Number"===m||"Number_Answer__c"==m?(_=k+"Number_Answer__c",L=F(u).val(),(d[_]!==L||h.prevSaveErrors||$)&&(g=!0,d[_]=L)):"Percent"===m||"Percent_Answer__c"==m?(_=k+"Percent_Answer__c",L=F(u).val(),(d[_]!==L||h.prevSaveErrors||$)&&(g=!0,d[_]=L)):"Phone"===m||"Phone_Answer__c"==m?(_=k+"Phone_Answer__c",L=F(u).val(),(d[_]!==L||h.prevSaveErrors||$)&&(g=!0,d[_]=L)):"Long Text"===m||"TEXTAREA"==m?(_=k+"Long_Text_Answer__c",L=F(u).val(),(d[_]!==L||h.prevSaveErrors||$)&&(g=!0,d[_]=L)):"URL"===m||"URL_Answer__c"==m?(_=k+"URL_Answer__c",L=F(u).val(),(d[_]!==L||h.prevSaveErrors||$)&&(g=!0,d[_]=L)):"Multi-select Picklist"===m||"MULTIPICKLIST"==m?(L=F(u).val(),_=k+"Long_Text_Answer__c",null!==L?(d[_]!==L.join(";")||h.prevSaveErrors||$)&&(g=!0,d[_]=L.join(";")):(d[_]!==L||h.prevSaveErrors||$)&&(g=!0,d[_]="")):"Radio Button List"===m?(_=k+"Long_Text_Answer__c",L=F(u).find("input:checked").val(),(d[_]!==L||h.prevSaveErrors||$)&&(g=!0,d[_]=L)):"Checkbox List"===m?(_=k+"Long_Text_Answer__c",L=F(u).find(":checked").map(function(){return this.value}).get().join(";"),L.length>0?(d[_]!==L||h.prevSaveErrors||$)&&(g=!0,d[_]=L):(d[_]!==L||h.prevSaveErrors||$)&&(g=!0,d[_]="")):"Checkbox_Answer__c"===m?(L=F(u).find(":checked").length,_=k+"Checkbox_Answer__c",L>0?(d[_]!==!0||h.prevSaveErrors||$)&&(g=!0,d[_]=!0):(d[_]!==!1||h.prevSaveErrors||$)&&(g=!0,d[_]=!1)):"E-Signature"===m&&(_=k+"Long_Text_Answer__c",L=F(u).val(),(d[_]!==L||h.prevSaveErrors||$)&&(g=!0,d[_]=L));if(c&&h.onMobile){var I=contextContact.hasOwnProperty("Id")?contextContact.Id:contextContact[k+"Mobile_ID__c"];h.formRender.fieldLinkUpdateArray.push({contactID:I,fieldLinkType:d.fieldLink,saveLocation:_,answerValue:d[_],questionId:p}),"Contact"===d.fieldLinkObjectType&&(l=!0,contextContact[d.fieldLink]=d[_])}(g||d[k+"hidden_by_dep__c"])&&(null!==d.Id?a.push(d):r.push(d))}return n.allSFAnswers=a,n.allExternalAnswers=r,n.allSFAnswers}function o(e){var t=sfEnv.thisForm,n=[],i=[];if(e.length>0&&F.each(e,function(e,t){t.nullDate===!0&&(n.push(t.Id),delete t.nullDate)}),null!==t){var a=JSON.parse(JSON.stringify(t));h.wasQuickSave===!1?a[k+"Save_Complete__c"]=!0:a[k+"Save_Complete__c"]=!1,i.push(a)}m.saveAnswersVFR(e,n,i)}function l(){function e(e){var t,n="";for(t=1;e>=t;t++)n+=1===t?'<option class="goToPage'+t+'" selected disabled value='+t+">Page "+t+"</option>":'<option class="goToPage'+t+'" value='+t+">Page "+t+"</option>";return n}var t=e(h.formRender.allPages.length),n=h.onMobile?"paginationBlock-mobile":"",i='<div class="paginationBlock '+n+'"><button type="button" class="btn prevBtn" style="display:none;"> <span class="glyphicon small glyphicon-chevron-left"></span> </button>Page <span class="currentPageText">1</span> of '+h.formRender.allPages.length+'<button type="button" class="btn nextBtn"> <span class="glyphicon small glyphicon-chevron-right"></span> </button><span class="goToPage">Go To: <select class="goToPage">'+t+"</select></span></div>";F(".buttons-fixed").after(i),F(".prevBtn").on("click",function(){u._changePage("prev")}),F(".nextBtn").on("click",function(){u._changePage("next")}),F("select.goToPage").on("change",function(e){var t=e.currentTarget.value;u._changePage(null,t)})}function d(e,t){sfEnv.isPreview||u._saveOnPageChange(),F(".page"+h.formRender.currentPage).hide(),F(".goToPage"+h.formRender.currentPage).attr("selected",!1).attr("disabled",!1),"next"===e?h.formRender.currentPage++:"prev"===e?h.formRender.currentPage--:h.formRender.currentPage=t,F(".page"+h.formRender.currentPage).show(),F(".currentPageText").html(h.formRender.currentPage),F(".goToPage"+h.formRender.currentPage).attr("selected",!0).attr("disabled",!0),F("html, body").animate({scrollTop:0},0),h.formRender.currentPage>1&&h.formRender.currentPage<h.formRender.totalPages&&(F(".prevBtn").show(),F(".nextBtn").show()),h.formRender.currentPage==h.formRender.totalPages&&(F(".nextBtn").hide(),F(".prevBtn").show()),1==h.formRender.currentPage&&(F(".prevBtn").hide(),F(".nextBtn").show())}function c(){var t=e("./app");F(".changed-input").length&&(h.wasQuickSave=!0,t.saveMsgOn(),u._saveThisForm())}var u={renderForm:i,afterFormRender:a,_saveThisForm:r,_getAnswers:s,_saveAnswers:o,_buildPagination:l,_changePage:d,_saveOnPageChange:c},h=(e("./app"),e("./dataStore")),p=e("./section"),f=e("./dependency"),v=e("./validation"),m=e("./vfr"),g=e("./util").formatDateTime,_=e("./util").formatDate,b=e("./util").convertDateFromHTML5,w=e("./util").convertDateTimeFromHTML5,y=e("./answer"),F=jQuery,k=sfEnv.namespace,L=sfEnv.isFormDetail;t.exports=u},{"./answer":9,"./app":10,"./dataStore":11,"./dependency":12,"./section":16,"./util":17,"./validation":18,"./vfr":19}],14:[function(e,t,n){"use strict";function i(){window.location.href="/"+c.Id}function a(){return confirm("Are you sure you want to delete this Form?")?void Visualforce.remoting.Manager.invokeAction(sfEnv.VFR.deleteForm,u,function(e,t){t.status===!0?"success"===e?window.location.href="/"+p:alert(e):alert("There was a system error deleting your form.")}):!1}function r(){return confirm("Locking the form will disable the complete form button, not allowing users to complete the form.  This will also enable the process problems button, giving users the ability to create problems. Do you want to proceed?")?void Visualforce.remoting.Manager.invokeAction(sfEnv.VFR.lockForm,u,function(e,t){t.status===!0?"success"===e?(d("#ppBtn").parent().show(),d("#lockBtn").parent().hide(),d("#cfBtn").parent().hide()):alert(e):alert("There was a system error locking your form.")}):!1}function s(){var e=d("h1.formName").attr("data-formid");return confirm("Archiving the form will save space but reports and workflows on Answers will not include Answers on this form. Do you want to proceed?")?(d("#savingStatus").show(),void Visualforce.remoting.Manager.invokeAction(sfEnv.VFR.archiveForm,e,function(e,t){d("#savingStatus").hide(),t.status===!0?"success"===e?(d("#unarchiveBtn").parent().show(),d("#archiveBtn").parent().hide(),d("#ArchiveHeader").show()):alert(e):alert("There was a system error archiving your form.")})):!1}function o(){var e=d("h1.formName").attr("data-formid");return confirm("This form was archived to save space. Do you want to unarchive anyway?")?(d("#savingStatus").show(),void Visualforce.remoting.Manager.invokeAction(sfEnv.VFR.unarchiveForm,e,function(e,t){d("#savingStatus").hide(),t.status===!0?"success"===e?(d("#archiveBtn").parent().show(),d("#unarchiveBtn").parent().hide(),d("#ArchiveHeader").hide()):alert(e):alert("There was a system error unarchiving your form.")})):!1}var l={returnToDetailPage:i,deleteForm:a,lockForm:r,archiveForm:s,unarchiveForm:o},d=jQuery,c=sfEnv.thisForm,u=sfEnv.formId,h=sfEnv.namespace,p=sfEnv.thisForm[h+"Form_Template__c"];t.exports=l},{}],15:[function(e,t,n){"use strict";function i(e,t,n){var i=e.qType;return"Text"===i||"Text_Answer__c"===i?b._textInput(e,t,n):"Currency"===i||"Currency_Answer__c"===i?b._currencyInput(e,t,n):"Date"===i||"Date_Answer__c"===i?b._dateInput(e,t,n):"Date/Time"===i||"Date_Time_Answer__c"===i?b._dateTimeInput(e,t,n):"Email"===i||"Email_Answer__c"===i?b._emailInput(e,t,n):"Number"===i||"Number_Answer__c"===i?b._numberInput(e,t,n):"Percent"===i||"Percent_Answer__c"===i?b._percentInput(e,t,n):"Phone"===i||"Phone_Answer__c"===i?b._phoneInput(e,t,n):"Long Text"===i||"TEXTAREA"===i?b._longTextInput(e,t,n):"URL"===i||"URL_Answer__c"===i?b._urlInput(e,t,n):"Picklist"===i||"PICKLIST"===i?b._picklist(e,t,n):"Multi-select Picklist"===i||"MULTIPICKLIST"===i?b._msPicklist(e,t,n):"Radio Button List"===i?b._radioButtonList(e,t,n):"Checkbox List"===i||"Checkbox_Answer__c"===i?b._checkBoxList(e,t,n):"E-Signature"===i?b._esig(e,t,n):""}function a(e,t,n){var i=n[w+"Text_Answer__c"]?n[w+"Text_Answer__c"]:k;return'\n		<input maxlength="'+e.fieldLength+'" \n			class="answerValue" \n			'+e.requiredOrNot+' \n			data-questionid="'+t.Id+'" \n			type="text" \n			name="'+e.thisAnswerId+'" \n			value="'+i+'" />';
}function r(e,t,n){var i=n[w+"Currency_Answer__c"]?n[w+"Currency_Answer__c"]:k;return'\n		<input \n			class="answerValue '+e.regExClass+' removeExtraCharacters"\n			'+e.requiredOrNot+'\n			maxlength="'+e.fieldLength+'" \n			data-questionid="'+t.Id+'" \n			type="text" \n			name="'+e.thisAnswerId+'" \n			value="'+i+'" />'}function s(e,t,n){var i=n[w+"Email_Answer__c"]?n[w+"Email_Answer__c"]:k;return'\n		<input \n			class="email answerValue" \n			'+e.requiredOrNot+' \n			data-questionid="'+t.Id+'" \n			type="email" \n			name="'+e.thisAnswerId+'" \n			value="'+i+'" />'}function o(e,t,n){var i=n[w+"Number_Answer__c"]?n[w+"Number_Answer__c"]:k;return'\n		<input \n			class="answerValue '+e.regExClass+' removeExtraCharacters" \n			'+e.requiredOrNot+'\n			 maxlength="'+e.fieldLength+'" \n			 data-questionid="'+t.Id+'" \n			 type="text" \n			 name="'+e.thisAnswerId+'" \n			 value="'+i+'" />'}function l(e,t,n){var i=n[w+"Percent_Answer__c"]?n[w+"Percent_Answer__c"]:k;return'\n		<input \n			class="answerValue '+e.regExClass+' removeExtraCharacters"\n			'+e.requiredOrNot+'\n			maxlength="'+e.fieldLength+'" \n			data-questionid="'+t.Id+'" \n			type="text" \n			name="'+e.thisAnswerId+'" \n			value="'+i+'" />'}function d(e,t,n){var i=n[w+"Phone_Answer__c"]?n[w+"Phone_Answer__c"]:k;return'\n		<input \n			class="answerValue removeExtraCharacters phoneNum"\n			'+e.requiredOrNot+'\n			data-questionid="'+t.Id+'" \n			type="phone" \n			name="'+e.thisAnswerId+'"\n			value="'+i+'" />'}function c(e,t,n){var i=n[w+"Long_Text_Answer__c"]?n[w+"Long_Text_Answer__c"]:k;return'\n		<textarea \n		 rows="6" \n		 class="answerValue"\n		 '+e.requiredOrNot+'\n		 maxlength="'+e.fieldLength+'"\n		 data-questionid="'+t.Id+'"\n		 name="'+e.thisAnswerId+'"\n		>'+i+"</textarea>"}function u(e,t,n){var i=n[w+"URL_Answer__c"]?n[w+"URL_Answer__c"]:k;return'\n		<input \n			class="answerValue URL"\n			'+e.requiredOrNot+'\n			data-questionid="'+t.Id+'"\n			type="url"\n			name="'+e.thisAnswerId+'"\n			value="'+i+'" />'}function h(e,t,n){var i=void 0,a="";return a+='<select \n			  class="formInput answerValue"\n			  name="'+e.thisAnswerId+'"\n			  '+e.requiredOrNot+'\n			  data-questionid="'+t.Id+'" >\n\n				// first add --None-- option\n				<option value="">--None--</option>',t[w+"Question_Values__r"]?(i=t[w+"Question_Values__r"],$.each(i,function(e,t){a+=void 0!==n[w+"Long_Text_Answer__c"]&&n[w+"Long_Text_Answer__c"]===t[w+"Label__c"]?'<option value="'+t[w+"Label__c"]+'" selected="selected">\n           					'+t[w+"Label__c"]+"\n       					</option>":'<option value="'+t[w+"Label__c"]+'">\n           					'+t[w+"Label__c"]+"\n       					</option>"})):(i=e.questionParam.picklistValues,$.each(i,function(e,t){a+=void 0!==n[w+"Long_Text_Answer__c"]&&n[w+"Long_Text_Answer__c"]===t?'<option value="'+t+'" selected="selected">\n           					'+t+"\n       					</option>":'<option value="'+t+'">\n							'+t+"\n						</option>"})),a+="</select>"}function p(e,t,n){var i=void 0,a=void 0,r=void 0,s=void 0,o="";return o+='<select \n			  class="formInput answerValue" \n			  multiple \n			  name="'+e.thisAnswerId+'"\n			  '+e.requiredOrNot+'\n			  data-questionid="'+t.Id+'" >		\n				\n				<option value="">--None--</option>',i=t[w+"Question_Values__r"],a=$("<div/>").html(n[w+"Long_Text_Answer__c"]).text(),s=a.split(";"),t[w+"Question_Values__r"]?(i=t[w+"Question_Values__r"],a=$("<div/>").html(n[w+"Long_Text_Answer__c"]).text(),s=a.split(";"),$.each(i,function(e,t){void 0!==n[w+"Long_Text_Answer__c"]?(r=$("<div/>").html(t[w+"Label__c"]).text(),o+=$.inArray(r,s)>-1?'<option selected="selected" value="'+t[w+"Label__c"]+'">\n                    			'+t[w+"Label__c"]+"\n                			</option>":'<option value="'+t[w+"Label__c"]+'">\n                    			'+t[w+"Label__c"]+"\n                			</option>"):o+='<option value="'+t[w+"Label__c"]+'">\n                    			'+t[w+"Label__c"]+"\n                			</option>"})):(i=questionParam.picklistValues,a=$("<div/>").html(n[w+"Long_Text_Answer__c"]).text(),s=a.split(";"),$.each(i,function(e,t){void 0!==n[w+"Long_Text_Answer__c"]?(r=$("<div/>").html(t).text(),o+=$.inArray(r,s)>-1?'<option selected="selected" value="'+t+'">\n                    			'+t+"\n                			</option>":'<option value="'+t+'">\n                    			'+t+"\n                			</option>"):o+='<option value="'+t+'">\n                    			'+t+"\n                			</option>"})),o+="</select>"}function f(e,t,n){var i="";return i+='<table \n			 role="presentation" \n			 class="formInput answerValue table-radio '+e.requiredTableMargin+'"\n			 data-questionid="'+t.Id+'">\n				<tbody>',$.each(t[w+"Question_Values__r"],function(a,r){i+=void 0!==n[w+"Long_Text_Answer__c"]&&n[w+"Long_Text_Answer__c"]===r[w+"Label__c"]?'<tr>\n						<td class="radio-list">\n							<input \n							 type="radio" \n							 '+e.requiredOrNot+'\n							 checked="checked"\n							 value="'+r[w+"Label__c"]+'"\n							 name="'+e.thisAnswerId+'"\n							 id="'+r.Id+'"\n							 data-questionid="'+t.Id+'" >\n\n							<label for="'+r.Id+'">\n								'+r[w+"Label__c"]+" \n							</label>\n						</td>\n					</tr>":'<tr>\n						<td class="radio-list">\n							<input\n							 type="radio"\n							 '+e.requiredOrNot+'\n							 value="'+r[w+"Label__c"]+'"\n							 name="'+e.thisAnswerId+'"\n							 id="'+r.Id+'"\n							 data-questionid="'+t.Id+'">\n\n							<label for="'+r.Id+'">\n								'+r[w+"Label__c"]+"\n							</label>\n						</td>\n					</tr>"}),i+="	</tbody>\n			</table>"}function v(e,t,n){var i=void 0,a=void 0,r=void 0,s="";return s+='<table\n			  role="presentation"\n			  class="formInput answerValue table-checkbox '+e.requiredTableMargin+'"\n			  id="'+t.Id+'"\n			  data-questionid="'+t.Id+'">\n				<tbody>',"Checkbox_Answer__c"==e.qType?s+=n[w+"Checkbox_Answer__c"]===!0?'<tr>	\n						<td>\n							<input \n							 value="'+t[w+"Label__c"]+'"\n							 '+e.requiredOrNot+'\n							 type="checkbox"\n							 checked="checked"\n							 name="'+e.thisAnswerId+'"\n							 id="'+t[w+"Label__c"]+'"\n							 data-questionid="'+t.Id+'"\n							 class="boolean-checkbox" />\n						 </td>\n					 </tr>':'<tr>\n						<td>\n							<input \n							 value="'+t[w+"Label__c"]+'"\n							 '+e.requiredOrNot+'\n							 type="checkbox"\n							 name="'+e.thisAnswerId+'"\n							 id="'+t[w+"Label__c"]+'"\n							 data-questionid="'+t.Id+'"\n							 class="boolean-checkbox" />\n						 </td>\n					 </tr>':(i=$("<div/>").html(n[w+"Long_Text_Answer__c"]).text(),r=i.split(";"),$.each(t[w+"Question_Values__r"],function(i,o){void 0!==n[w+"Long_Text_Answer__c"]?(a=$("<div/>").html(o[w+"Label__c"]).text(),s+=$.inArray(a,r)>-1?'<tr>\n								<td class="checkbox-list">\n									<input\n									 value="'+o[w+"Label__c"]+'"\n									 '+e.requiredOrNot+'\n									 type="checkbox"\n									 checked="checked"\n									 name="'+e.thisAnswerId+'"\n									 id="'+o.Id+'"\n									 data-questionid="'+t.Id+'" />\n\n									 <label for="'+o.Id+'">\n									 	'+o[w+"Label__c"]+"\n								 	</label>\n							 	</td>\n						 	</tr>":'<tr>\n								<td class="checkbox-list">\n									<input\n									 value="'+o[w+"Label__c"]+'"\n									 '+e.requiredOrNot+'\n									 type="checkbox"\n									 name="'+e.thisAnswerId+'"\n									 id="'+o.Id+'"\n									 data-questionid="'+t.Id+'" />\n\n									 <label for="'+o.Id+'">\n									 	'+o[w+"Label__c"]+"\n								 	</label>\n							 	</td>\n						 	</tr>"):s+='<tr>\n							<td class="checkbox-list">\n								<input\n								 value="'+o[w+"Label__c"]+'"\n								 '+e.requiredOrNot+'\n								 type="checkbox"\n								 name="'+e.thisAnswerId+'"\n								 id="'+o.Id+'"\n								 data-questionid="'+t.Id+'" />\n\n								 <label for="'+o.Id+'">\n								 	'+o[w+"Label__c"]+"\n							 	</label>\n						 	</td>\n					 	</tr>"})),s+="	</tbody>\n			</table>"}function m(e,t,n){var i=void 0!==n[w+"Long_Text_Answer__c"]?n[w+"Long_Text_Answer__c"]:"",a=i.replace(/"/g,"&quot;");return sfEnv.hasSignature=!0,'	\n		<div class="sigPad" data-questionid="'+t.Id+'">\n			<ul class="sigNav">\n				<li class="drawIt"></li>\n				<li class="clearButton">\n					<a href="#clear" class="btn btn-primary">Clear</a>\n				</li>\n			</ul>\n			<div class="sig sigWrapper">\n				<div class="typed"></div>\n				<canvas class="pad" width="243" height="80" id="sigmy"></canvas>\n				<input \n				 type="hidden"\n				 name="output"\n				 class="output answerValue sigInput"\n				 '+e.requiredOrNot+'\n				 data-questionid="'+t.Id+'"\n				 value="'+a+'"/>\n			</div>\n		</div>'}function g(e,t,n){var i=F(n[w+"Date_Answer__c"]);return'\n		<div class="inner-addon right-addon">\n			<i class="glyphicon glyphicon-calendar input-glyphicon-calendar"></i>\n			<input \n				class="answerValue date" \n				'+e.requiredOrNot+' \n				data-questionid="'+t.Id+'" \n				type="date" \n				name="'+e.thisAnswerId+'" \n				value="'+i+'"/>\n		</div>'}function _(e,t,n){var i=y(n[w+"Date_Time_Answer__c"]);return'\n		<div class="inner-addon right-addon">\n			<i class="glyphicon glyphicon-calendar input-glyphicon-calendar"></i>\n			<input \n				class="answerValue dateTime" \n				'+e.requiredOrNot+' \n				data-questionid="'+t.Id+'" \n				type="datetime-local" \n				name="'+e.thisAnswerId+'" \n				value="'+i+'"/>\n		</div>'}var b={createQuestionHTML:i,_textInput:a,_currencyInput:r,_emailInput:s,_numberInput:o,_percentInput:l,_phoneInput:d,_longTextInput:c,_urlInput:u,_picklist:h,_msPicklist:p,_radioButtonList:f,_checkBoxList:v,_esig:m,_dateInput:g,_dateTimeInput:_},w=sfEnv.namespace,y=e("./util").convertDateTimeForHTML5,F=e("./util").convertDateForHTML5,k="";t.exports=b},{"./util":17}],16:[function(e,t,n){"use strict";function i(t,n){var i=(e("./form"),'<div class="answerColumn">'),r='<div class="answerColumn">',h=n.Id?n.Id:n[o+"Mobile_ID__c"],p="",f=!1;return s.each(t.allQuestions,function(e,t){var n={},p=t.question,f="",v=void 0,m=u.findAnswers(p.Id,h),g="",_="",b="",w=void 0,y=void 0,F=void 0;l.questionStore[p.Id]=t;var k=" ";switch(n.dependentQuestionVals="",n.questionId=p.Id,n.thisAnswerId=null!==m.Id?m.Id:m[o+"Mobile_ID__c"],p.hasOwnProperty(o+"Dependent_Question_Values__c")&&(v=JSON.parse(s.parseHTML(p[o+"Dependent_Question_Values__c"])[0].data),s.isArray(v)||(p[o+"Dependent_Question_Values__c"]=v),k=" childQuestion ",n.dependentQuestionVals=p[o+"RandomId__c"],d.buildDepQuestionLogicStore(n.dependentQuestionVals,p[o+"Dependent_Question_Values__c"])),p.hasOwnProperty(o+"RandomId__c")&&(n.randomId=p[o+"RandomId__c"]),p[o+"Indentation__c"]){case"Level One":b="indentOnce";break;case"Level Two":b="indentTwice";break;case"Level Three":b="indentThrice";break;default:b=""}n.qType=p[o+"Type__c"],w=p[o+"Bold__c"]?"bold":"normal",y=p[o+"Color__c"],F='style="color:'+y+";font-weight:"+w+';"',"Space"===n.qType?f+='<div class="control-group"><span class="control-label"></span><div class="controls"><div class="blank_space">&nbsp;</div>':"Free Text"===n.qType?(p[o+"Label__c"]=p[o+"Label__c"].replace(/\n/g,"<br/>"),f+='<div class="control-group '+b+" "+k+'" '+F+' data-dependentquestionvals="'+n.dependentQuestionVals+'" data-randomid="'+p[o+"RandomId__c"]+'"><span>'+p[o+"Label__c"]+'</span><div class="controls">'):(("Radio Button List"===n.qType||"Checkbox List"===n.qType)&&(g="controls-table"),f+='<div class="control-group '+b+" "+k+'" data-dependentquestionvals="'+n.dependentQuestionVals+'" data-randomid="'+p[o+"RandomId__c"]+'">\n									<span class="control-label" '+F+">\n										"+p[o+"Label__c"]+'\n									</span>\n								<div class="controls '+g+'">'),p[o+"Required__c"]&&(""!==g&&(_="controls-table-cell",n.requiredTableMargin="controls-table-cell-margin"),f+='<div class="requiredBlock '+_+'"/>'),n.regExClass="",p[o+"Field_Length__c"]?(n.fieldLength=p[o+"Field_Length__c"],p.hasOwnProperty(o+"Decimal_Length__c")&&a(n,p)):"Long Text"==n.qType||"TEXTAREA"==n.qType?n.fieldLength=p[o+"Field_Length__c"]?p[o+"Field_Length__c"]:32e3:n.fieldLength=255,n.requiredOrNot=p[o+"Required__c"]?" required ":"","Field Link"==n.qType&&(n.qType="Long_Text_Answer__c"===p[o+"Link_Answer_Field__c"]?t.fieldLinkParentType:p[o+"Link_Answer_Field__c"],n.fieldLength=p[o+"Field_Length__c"],p.hasOwnProperty(o+"Decimal_Length__c")&&a(n,p),t.dbRequired===!0&&(n.requiredOrNot+=" dbrequired "),t.readonly===!0&&(n.requiredOrNot+=" disabled ")),f+=c(n,p,m),f+='</div>\n								<br class="clear-float"></div>',2==p[o+"Column__c"]?r+=f:i+=f}),'<div class="answerColumn">'==r&&(i=i.replace('class="answerColumn"',"")),p+=i+"</div>",'<div class="answerColumn">'!==r&&(p+=r+"</div>"),p+="</div>",f&&(p="_FormLoadError"),p}function a(e,t){var n=e.fieldLength,i=t[o+"Decimal_Length__c"];e.regExClass=n+"-"+i,l.regExRules.push([n,i]),0===n?e.fieldLength=1+i+1:0===i?e.fieldLength=n:e.fieldLength=n+i+1}var r={buildStandardSection:i},s=jQuery,o=sfEnv.namespace,l=e("./dataStore"),d=e("./dependency"),c=e("./question.js").createQuestionHTML,u=e("./answer");t.exports=r},{"./answer":9,"./dataStore":11,"./dependency":12,"./form":13,"./question.js":15}],17:[function(e,t,n){"use strict";function i(e){var t=p[e];$("#savingStatus").find(".saveText").html(t)}function a(e){return e.getUTCMonth()+1+"/"+e.getUTCDate()+"/"+e.getUTCFullYear()}function r(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=t>=12?"pm":"am";t%=12,t=t?t:12,n=10>n?"0"+n:n;var a=t+":"+n+" "+i;return e.getUTCMonth()+1+"/"+e.getUTCDate()+"/"+e.getUTCFullYear()+"  "+a}function s(e,t){var n="";t.indexOf("a")>-1&&(n+="abcdefghijklmnopqrstuvwxyz"),t.indexOf("A")>-1&&(n+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),t.indexOf("#")>-1&&(n+="0123456789"),t.indexOf("!")>-1&&(n+="~`!@#$%^&*()_+-={}[]:\";'<>?,./|\\");for(var i="",a=e;a>0;--a)i+=n[Math.round(Math.random()*(n.length-1))];return i}function o(e){var t=Date.parse(new Date(e));return t.toString()}function l(e){var t=new Date(e);return h&&t.setHours(t.getHours()+t.getTimezoneOffset()/60),Date.parse(t).toString()}function d(e){return void 0!==e?new Date(parseInt(e)).toJSON().substring(0,10):""}function c(e){var t;return void 0!==e?(t=new Date(parseInt(e)),t.setHours(t.getHours()-t.getTimezoneOffset()/60),t.toJSON().substring(0,19)):""}var u={contextualSpinnerText:i,formatDate:a,formatDateTime:r,randomString:s,convertDateFromHTML5:o,convertDateTimeFromHTML5:l,convertDateForHTML5:d,convertDateTimeForHTML5:c},h=sfEnv.onMobile,p={};p.clear="",p.clearSoups="Clearing Stored Data...",p.runQueryExistingContacts="Querying Contacts...",p.runQueryForms="Querying Forms...",p.runQueryContactSoup="Displaying Queried Data...",p.syncForms="Syncing Form Data...",p.downloadedForms="Loading All Forms...",p.saveForm="Saving Form Data...",p.saveContact="Saving Contact Data...",p.createForm="Creating New Form...",p.onOnline="Saving Offline Data...",t.exports=u},{}],18:[function(e,t,n){"use strict";function i(){o.validator.addMethod("cRequired",o.validator.methods.required,"This question is required."),o.validator.addMethod("emailPattern",function(e,t,n){return this.optional(t)||n.test(e)},"Invalid email format."),o.validator.addMethod("sig_check",function(e,t,n){return t.required&&"[]"===e?this.optional(t)||n.test(e):!0},"Please Sign"),o.validator.addMethod("http_url",function(e,t,n){return 0===e.length?!0:/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},"Enter a valid URL starting with http://");for(var e=0;e<l.regExRules.length;e++){var t=void 0,n=void 0,i={},a=l.regExRules[e];t=0===a[0]?new RegExp("^[0]\\.\\d{1,"+a[1]+"}?$"):0===a[1]?new RegExp("^\\d{0,"+a[0]+"}$"):new RegExp("^\\d{0,"+a[0]+"}(\\.\\d{1,"+a[1]+"})?$"),n=""+a[0]+"-"+a[1],i={},i["pattern"+e]=t,o.validator.addClassRules(n,i),o.validator.addMethod("pattern"+e,function(e,t,n){return this.optional(t)||n.test(e)},"Max "+a[0]+" digits left of decimal, "+a[1]+" to right.")}o.validator.addClassRules("URL",{http_url:/^http:\/\//}),o.validator.addClassRules("sigInput",{sig_check:/^\\[\\]/}),o.validator.addClassRules("email",{emailPattern:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/})}function a(t){var n=e("./app");o("#mainForm").validate({ignore:".ignore, .tt-hint",debug:!0,errorPlacement:function(e,t){t.is(":radio")||t.is(":checkbox")?e.appendTo(t.parents(".controls-table")):e.insertAfter(t)},submitHandler:function(e){return t(),!1},invalidHandler:function(e,t){n.saveMsgOff();var i=t.numberOfInvalids();if(i){var a=1==i?"The form has 1 error. It has been highlighted ":"The form has "+i+" errors. They have been highlighted ",r="";o.each(t.errorMap,function(e,t){var n=o('input[name="'+e+'"],textarea[name="'+e+'"],select[name="'+e+'"]').closest(".pageContent").prop("class"),i="1";void 0!==n&&null!==n&&(i=n.match(/\d+/)),console.log(-1===r.indexOf(i)),-1===r.indexOf(i)&&(r+=i+",")}),r=r.slice(0,-1);var s="on page(s): "+r;a+=s,o("div.error span").html(a),o("div.error").show()}else o("div.error").hide()}})}function r(){o("#formContent").removeClass("changed-input")}var s={setupValidationRules:i,setupFormValidation:a,removeChangedInputClass:r};e("jquery-validation");var o=jQuery,l=e("./dataStore");t.exports=s},{"./app":10,"./dataStore":11,"jquery-validation":20}],19:[function(e,t,n){"use strict";function i(e){if(void 0===e||!e.length)throw"No args in api call";Visualforce.remoting.Manager.invokeAction.bind(Visualforce.remoting.Manager).apply(null,e)}function a(e){var t=[sfEnv.VFR.queryAllForms,e,l._loadPageSuccess];l._apiCall(t)}function r(t,n){var i,a=e("./form"),r={};if(r.form=sfEnv.thisForm,n.status===!0){r.template=t[0];var s=r.template;$.each(s.sections,function(e,t){t.hasOwnProperty("allQuestions")&&t.allQuestions.length>0&&$.each(t.allQuestions,function(e,t){for(console.log(t),d.questionStore[t.question.Id]=t.question,i=0;i<t.answers.length;i++)d.answerStore[t.answers[i].Id]=t.answers[i]})}),a.renderForm(r,a.afterFormRender)}}function s(e,t,n){var i=[sfEnv.VFR.saveAllAnswers,e,t,n,l._saveAnswersSuccess];l._apiCall(i)}function o(t,n){var i=e("./app");i.saveMsgOff();var a=!1,r=0,s="";if(n.status===!0){for(var o=0;o<t.dbResults.length;o++){var l=t.dbResults[o];l.hasOwnProperty("errors")&&""!==l.errors&&(a=!0,r++,s+="Error #"+r+": "+l.errors+"\n")}a||d.wasQuickSave!==!0?a?(d.prevSaveErrors=!0,$("#formContent").addClass("saveError"),1===r?alert("There was "+r+" error during the save: \n\n"+s+"\n Please report this issue to your System Administrator."):alert("There were "+r+" errors during the save: \n\n"+s+"\n Please report this issue to your System Administrator.")):(d.prevSaveErrors=!1,c.removeChangedInputClass(),u.returnToDetailPage()):(d.wasQuickSave=!1,d.prevSaveErrors=!1,c.removeChangedInputClass()),d.wasQuickSave=!1}else d.wasQuickSave=!1,d.prevSaveErrors=!0,alert("There was a system error saving your form.")}var l={loadPageVFR:a,saveAnswersVFR:s,_apiCall:i,_loadPageSuccess:r,_saveAnswersSuccess:o},d=(sfEnv.namespace,e("./dataStore")),c=e("./validation"),u=e("./formDetail");t.exports=l},{"./app":10,"./dataStore":11,"./form":13,"./formDetail":14,"./validation":18}],20:[function(e,t,n){!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return void(t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var n=e.data(this[0],"validator");return n?n:(this.attr("novalidate","novalidate"),n=new e.validator(t,this[0]),e.data(this[0],"validator",n),n.settings.onsubmit&&(this.on("click.validate",":submit",function(t){n.settings.submitHandler&&(n.submitButton=t.target),e(this).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==e(this).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.on("submit.validate",function(t){function i(){var i,a;return n.settings.submitHandler?(n.submitButton&&(i=e("<input type='hidden'/>").attr("name",n.submitButton.name).val(e(n.submitButton).val()).appendTo(n.currentForm)),a=n.settings.submitHandler.call(n,n.currentForm,t),n.submitButton&&i.remove(),void 0!==a?a:!1):!0}return n.settings.debug&&t.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,i()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):i():(n.focusInvalid(),!1)})),n)},valid:function(){var t,n,i;return e(this[0]).is("form")?t=this.validate().form():(i=[],t=!0,n=e(this[0].form).validate(),this.each(function(){t=n.element(this)&&t,i=i.concat(n.errorList)}),n.errorList=i),t},rules:function(t,n){var i,a,r,s,o,l,d=this[0];if(t)switch(i=e.data(d.form,"validator").settings,a=i.rules,r=e.validator.staticRules(d),t){case"add":e.extend(r,e.validator.normalizeRule(n)),delete r.messages,a[d.name]=r,n.messages&&(i.messages[d.name]=e.extend(i.messages[d.name],n.messages));break;case"remove":return n?(l={},e.each(n.split(/\s/),function(t,n){l[n]=r[n],delete r[n],"required"===n&&e(d).removeAttr("aria-required")}),l):(delete a[d.name],r)}return s=e.validator.normalizeRules(e.extend({},e.validator.classRules(d),e.validator.attributeRules(d),e.validator.dataRules(d),e.validator.staticRules(d)),d),s.required&&(o=s.required,delete s.required,s=e.extend({required:o},s),e(d).attr("aria-required","true")),s.remote&&(o=s.remote,delete s.remote,s=e.extend(s,{remote:o})),s}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){return!!e.trim(""+e(t).val())},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,n){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=n,this.init()},e.validator.format=function(t,n){return 1===arguments.length?function(){var n=e.makeArray(arguments);return n.unshift(t),e.validator.format.apply(this,n)}:(arguments.length>2&&n.constructor!==Array&&(n=e.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),e.each(n,function(e,n){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return n})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(t,n){var i=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===n.which&&""===this.elementValue(t)||-1!==e.inArray(n.keyCode,i)||(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,n,i){"radio"===t.type?this.findByName(t.name).addClass(n).removeClass(i):e(t).addClass(n).removeClass(i)},unhighlight:function(t,n,i){"radio"===t.type?this.findByName(t.name).removeClass(n).addClass(i):e(t).removeClass(n).addClass(i)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var n=e.data(this.form,"validator"),i="on"+t.type.replace(/^validate/,""),a=n.settings;a[i]&&!e(this).is(a.ignore)&&a[i].call(n,this,t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,i=this.groups={};e.each(this.settings.groups,function(t,n){"string"==typeof n&&(n=n.split(/\s/)),e.each(n,function(e,n){i[n]=t})}),n=this.settings.rules,e.each(n,function(t,i){n[t]=e.validator.normalizeRule(i)}),e(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']",t).on("click.validate","select, option, [type='radio'], [type='checkbox']",t),this.settings.invalidHandler&&e(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),e(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){var n=this.clean(t),i=this.validationTargetFor(n),a=!0;return this.lastElement=i,void 0===i?delete this.invalid[n.name]:(this.prepareElement(i),this.currentElements=e(i),a=this.check(i)!==!1,a?delete this.invalid[i.name]:this.invalid[i.name]=!0),e(t).attr("aria-invalid",!a),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),a},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var n in t)this.errorList.push({message:t[n],element:this.findByName(n)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors();var t,n=this.elements().removeData("previousValue").removeAttr("aria-invalid");if(this.settings.unhighlight)for(t=0;n[t];t++)this.settings.unhighlight.call(this,n[t],this.settings.errorClass,"");else n.removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,n=0;for(t in e)n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,n={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in n||!t.objectLength(e(this).rules())?!1:(n[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return e(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var n,i=e(t),a=t.type;return"radio"===a||"checkbox"===a?this.findByName(t.name).filter(":checked").val():"number"===a&&"undefined"!=typeof t.validity?t.validity.badInput?!1:i.val():(n=i.val(),"string"==typeof n?n.replace(/\r/g,""):n)},check:function(t){t=this.validationTargetFor(this.clean(t));var n,i,a,r=e(t).rules(),s=e.map(r,function(e,t){return t}).length,o=!1,l=this.elementValue(t);for(i in r){a={method:i,parameters:r[i]};try{if(n=e.validator.methods[i].call(this,l,t,a.parameters),"dependency-mismatch"===n&&1===s){o=!0;continue}if(o=!1,"pending"===n)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!n)return this.formatAndAdd(t,a),!1}catch(d){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+a.method+"' method.",d),d instanceof TypeError&&(d.message+=".  Exception occurred when checking element "+t.id+", check the '"+a.method+"' method."),d}}if(!o)return this.objectLength(r)&&this.successList.push(t),!0},customDataMessage:function(t,n){return e(t).data("msg"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase())||e(t).data("msg")},customMessage:function(e,t){var n=this.settings.messages[e];return n&&(n.constructor===String?n:n[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,n){return this.findDefined(this.customMessage(t.name,n),this.customDataMessage(t,n),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[n],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,n){var i=this.defaultMessage(t,n.method),a=/\$?\{(\d+)\}/g;"function"==typeof i?i=i.call(this,n.parameters,t):a.test(i)&&(i=e.validator.format(i.replace(a,"{$1}"),n.parameters)),this.errorList.push({message:i,element:t,method:n.method}),this.errorMap[t.name]=i,this.submitted[t.name]=i},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,n;for(e=0;this.errorList[e];e++)n=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),
this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,n){var i,a,r,s=this.errorsFor(t),o=this.idOrName(t),l=e(t).attr("aria-describedby");s.length?(s.removeClass(this.settings.validClass).addClass(this.settings.errorClass),s.html(n)):(s=e("<"+this.settings.errorElement+">").attr("id",o+"-error").addClass(this.settings.errorClass).html(n||""),i=s,this.settings.wrapper&&(i=s.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement(i,e(t)):i.insertAfter(t),s.is("label")?s.attr("for",o):0===s.parents("label[for='"+o+"']").length&&(r=s.attr("id").replace(/(:|\.|\[|\]|\$)/g,"\\$1"),l?l.match(new RegExp("\\b"+r+"\\b"))||(l+=" "+r):l=r,e(t).attr("aria-describedby",l),a=this.groups[t.name],a&&e.each(this.groups,function(t,n){n===a&&e("[name='"+t+"']",this.currentForm).attr("aria-describedby",s.attr("id"))}))),!n&&this.settings.success&&(s.text(""),"string"==typeof this.settings.success?s.addClass(this.settings.success):this.settings.success(s,t)),this.toShow=this.toShow.add(s)},errorsFor:function(t){var n=this.idOrName(t),i=e(t).attr("aria-describedby"),a="label[for='"+n+"'], label[for='"+n+"'] *";return i&&(a=a+", #"+i.replace(/\s+/g,", #")),this.errors().filter(a)},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),e(t).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+t+"']")},getLength:function(t,n){switch(n.nodeName.toLowerCase()){case"select":return e("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return t.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e){return e},string:function(t,n){return!!e(t,n.form).length},"function":function(e,t){return e(t)}},optional:function(t){var n=this.elementValue(t);return!e.validator.methods.required.call(this,n,t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})},destroy:function(){this.resetForm(),e(this.currentForm).off(".validate").removeData("validator")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,n){t.constructor===String?this.classRuleSettings[t]=n:e.extend(this.classRuleSettings,t)},classRules:function(t){var n={},i=e(t).attr("class");return i&&e.each(i.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(n,e.validator.classRuleSettings[this])}),n},normalizeAttributeRule:function(e,t,n,i){/min|max/.test(n)&&(null===t||/number|range|text/.test(t))&&(i=Number(i),isNaN(i)&&(i=void 0)),i||0===i?e[n]=i:t===n&&"range"!==t&&(e[n]=!0)},attributeRules:function(t){var n,i,a={},r=e(t),s=t.getAttribute("type");for(n in e.validator.methods)"required"===n?(i=t.getAttribute(n),""===i&&(i=!0),i=!!i):i=r.attr(n),this.normalizeAttributeRule(a,s,n,i);return a.maxlength&&/-1|2147483647|524288/.test(a.maxlength)&&delete a.maxlength,a},dataRules:function(t){var n,i,a={},r=e(t),s=t.getAttribute("type");for(n in e.validator.methods)i=r.data("rule"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()),this.normalizeAttributeRule(a,s,n,i);return a},staticRules:function(t){var n={},i=e.data(t.form,"validator");return i.settings.rules&&(n=e.validator.normalizeRule(i.settings.rules[t.name])||{}),n},normalizeRules:function(t,n){return e.each(t,function(i,a){if(a===!1)return void delete t[i];if(a.param||a.depends){var r=!0;switch(typeof a.depends){case"string":r=!!e(a.depends,n.form).length;break;case"function":r=a.depends.call(n,n)}r?t[i]=void 0!==a.param?a.param:!0:delete t[i]}}),e.each(t,function(i,a){t[i]=e.isFunction(a)?a(n):a}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var n;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(n=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(n[0]),Number(n[1])]))}),e.validator.autoCreateRanges&&(null!=t.min&&null!=t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),null!=t.minlength&&null!=t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var n={};e.each(t.split(/\s/),function(){n[this]=!0}),t=n}return t},addMethod:function(t,n,i){e.validator.methods[t]=n,e.validator.messages[t]=void 0!==i?i:e.validator.messages[t],n.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,n,i){if(!this.depend(i,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var a=e(n).val();return a&&a.length>0}return this.checkable(n)?this.getLength(t,n)>0:t.length>0},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var n,i,a=0,r=0,s=!1;if(e=e.replace(/\D/g,""),e.length<13||e.length>19)return!1;for(n=e.length-1;n>=0;n--)i=e.charAt(n),r=parseInt(i,10),s&&(r*=2)>9&&(r-=9),a+=r,s=!s;return a%10===0},minlength:function(t,n,i){var a=e.isArray(t)?t.length:this.getLength(t,n);return this.optional(n)||a>=i},maxlength:function(t,n,i){var a=e.isArray(t)?t.length:this.getLength(t,n);return this.optional(n)||i>=a},rangelength:function(t,n,i){var a=e.isArray(t)?t.length:this.getLength(t,n);return this.optional(n)||a>=i[0]&&a<=i[1]},min:function(e,t,n){return this.optional(t)||e>=n},max:function(e,t,n){return this.optional(t)||n>=e},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},equalTo:function(t,n,i){var a=e(i);return this.settings.onfocusout&&a.off(".validate-equalTo").on("blur.validate-equalTo",function(){e(n).valid()}),t===a.val()},remote:function(t,n,i){if(this.optional(n))return"dependency-mismatch";var a,r,s=this.previousValue(n);return this.settings.messages[n.name]||(this.settings.messages[n.name]={}),s.originalMessage=this.settings.messages[n.name].remote,this.settings.messages[n.name].remote=s.message,i="string"==typeof i&&{url:i}||i,s.old===t?s.valid:(s.old=t,a=this,this.startRequest(n),r={},r[n.name]=t,e.ajax(e.extend(!0,{mode:"abort",port:"validate"+n.name,dataType:"json",data:r,context:a.currentForm,success:function(i){var r,o,l,d=i===!0||"true"===i;a.settings.messages[n.name].remote=s.originalMessage,d?(l=a.formSubmitted,a.prepareElement(n),a.formSubmitted=l,a.successList.push(n),delete a.invalid[n.name],a.showErrors()):(r={},o=i||a.defaultMessage(n,"remote"),r[n.name]=s.message=e.isFunction(o)?o(t):o,a.invalid[n.name]=!0,a.showErrors(r)),s.valid=d,a.stopRequest(n,d)}},i)),"pending")}}});var t,n={};e.ajaxPrefilter?e.ajaxPrefilter(function(e,t,i){var a=e.port;"abort"===e.mode&&(n[a]&&n[a].abort(),n[a]=i)}):(t=e.ajax,e.ajax=function(i){var a=("mode"in i?i:e.ajaxSettings).mode,r=("port"in i?i:e.ajaxSettings).port;return"abort"===a?(n[r]&&n[r].abort(),n[r]=t.apply(this,arguments),n[r]):t.apply(this,arguments)})})},{}],21:[function(e,t,n){"use strict";var i=t.exports=function(e){this._options=e||{},this._options.strict=this._options.strict||!1,this._variables=this._options.variables||{}};i.prototype.execute=function(e,t){switch(this._temporaryVariables=t||{},e.constructor){case Array:return this._executeArray(e);case Object:return this._executeObject(e);default:if(this._options.strict)throw new Error("Invalid call to JSONLogic#execute with: "+JSON.stringify(e));return null}},i.prototype._executeArray=function(e){return e.forEach(function(e){this._executeObject(e)}.bind(this)),this._variables},i.prototype._executeObject=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=this._calculate(e[n]));for(var n in t)t.hasOwnProperty(n)&&(this._variables[n]=t[n]);return this._variables},i.prototype._calculate=function(e){var t;switch(e.operation){case"&&":return this._calcAnd(e);case"||":return this._calcOr(e);case">":t=function(e,t){return e>t};break;case"^":t=function(e,t){return!e!=!t};break;case">=":case"=>":t=function(e,t){return e>=t};break;case"<":t=function(e,t){return t>e};break;case"<=":case"=<":t=function(e,t){return t>=e};break;case"==":t=function(e,t){return e===t};break;case"!=":t=function(e,t){return e!==t};break;default:if(e===!0||e===!1)return e;if(e.constructor===String)return this._getVariable(e);throw new Error("Invalid operation to perform: "+JSON.stringify(e))}var n=e.variables[0];n.constructor===Object?n=this._calculate(n):n.constructor===String&&(n=this._getVariable(n));var i=e.variables[1];return i.constructor===Object?i=this._calculate(i):n.constructor===String&&(i=this._getVariable(i)),t(n,i)},i.prototype._calcAnd=function(e){var t=!0;return e.variables.forEach(function(e){return this._calculate(e)?void 0:(t=!1,!1)}.bind(this)),t},i.prototype._calcOr=function(e){var t=!1;return e.variables.forEach(function(e){return this._calculate(e)?(t=!0,!1):void 0}.bind(this)),t},i.prototype._getVariable=function(e){if(this._temporaryVariables[e])return this._temporaryVariables[e];if(this._variables[e])return this._variables[e];if(this._options.strict)throw new Error("Variable '"+e+"' has not been initalised");return!1}},{}]},{},[1]);